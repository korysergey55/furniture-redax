/*! For license information please see 628.c73bfb1a.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfurniture=self.webpackChunkfurniture||[]).push([[628],{7700:(t,e,n)=>{n.d(e,{FA:()=>_,Fy:()=>d,Ku:()=>A,T9:()=>h,Uj:()=>o,ZQ:()=>p,bD:()=>w,cY:()=>f,eX:()=>v,g:()=>y,nr:()=>g,yU:()=>l,zW:()=>m});const r=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const e=t[i],s=i+1<t.length,o=s?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,c=e>>2,l=(3&e)<<4|o>>4;let h=(15&o)<<2|u>>6,f=63&u;a||(f=64,s||(h=64)),r.push(n[c],n[l],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const e=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const a=i<t.length?n[t.charAt(i)]:64;++i;const u=i<t.length?n[t.charAt(i)]:64;if(++i,null==e||null==o||null==a||null==u)throw new s;const c=e<<2|o>>4;if(r.push(c),64!==a){const t=o<<4&240|a>>2;if(r.push(t),64!==u){const t=a<<6&192|u;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(t){return function(t){const e=r(t);return i.encodeByteArray(e,!0)}(t).replace(/\./g,"")},a=function(t){try{return i.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const u=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,c=()=>{try{return u()||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"/furniture-redax",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyD-jNjtGR87RAh2Jn1Rz6UzhFiGrKyWDNc",REACT_APP_BASE_URL:"https://vitaly-furniture-default-rtdb.europe-west1.firebasedatabase.app/"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&a(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},l=t=>{const e=(t=>{var e,n;return null===(n=null===(e=c())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},h=()=>{var t;return null===(t=c())||void 0===t?void 0:t.config};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function d(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}function p(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function g(){return!function(){var t;const e=null===(t=c())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m(){try{return"object"===typeof indexedDB}catch(t){return!1}}function v(){return new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}))}class y extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${t}`,r=this.errors[t],i=r?function(t,e){return t.replace(b,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(r,e):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new y(n,s,e)}}const b=/\{\$([^}]+)}/g;function w(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(E(n)&&E(s)){if(!w(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function E(t){return null!==t&&"object"===typeof t}function A(t){return t&&t._delegate?t._delegate:t}},4812:(t,e,n)=>{n.d(e,{Fq:()=>Mn,Gn:()=>Tn,HO:()=>pn,O8:()=>ae,OB:()=>Jn,XI:()=>Ve,jK:()=>Ye,mJ:()=>Ke,qT:()=>Te,sH:()=>Lt,uz:()=>Bn,vx:()=>zt,yl:()=>tn});function r(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error("number"===typeof t?"[MobX] minified error nr: "+t+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var i={};function s(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:i}var o=Object.assign,a=Object.getOwnPropertyDescriptor,u=Object.defineProperty,c=Object.prototype,l=[];Object.freeze(l);var h={};Object.freeze(h);var f="undefined"!==typeof Proxy,d=Object.toString();function p(){f||r("Proxy not available")}function g(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var m=function(){};function v(t){return"function"===typeof t}function y(t){switch(typeof t){case"string":case"symbol":case"number":return!0}return!1}function _(t){return null!==t&&"object"===typeof t}function b(t){if(!_(t))return!1;var e=Object.getPrototypeOf(t);if(null==e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"===typeof n&&n.toString()===d}function w(t){var e=null==t?void 0:t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)}function E(t,e,n){u(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function A(t,e,n){u(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function T(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return _(t)&&!0===t[n]}}function S(t){return null!=t&&"[object Map]"===Object.prototype.toString.call(t)}function O(t){return null!=t&&"[object Set]"===Object.prototype.toString.call(t)}var C="undefined"!==typeof Object.getOwnPropertySymbols;var I="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:C?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function R(t){return null===t?null:"object"===typeof t?""+t:t}function k(t,e){return c.hasOwnProperty.call(t,e)}var N=Object.getOwnPropertyDescriptors||function(t){var e={};return I(t).forEach((function(n){e[n]=a(t,n)})),e};function D(t,e){return!!(t&e)}function x(t,e,n){return n?t|=e:t&=~e,t}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B(r.key),r)}}function M(t,e,n){return e&&L(t.prototype,e),n&&L(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function U(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return P(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function V(){return V=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V.apply(null,arguments)}function j(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,F(t,e)}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function B(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}var $=Symbol("mobx-stored-annotations");function q(t){return Object.assign((function(e,n){if(H(n))return t.decorate_20223_(e,n);K(e,n,t)}),t)}function K(t,e,n){k(t,$)||E(t,$,V({},t[$])),function(t){return t.annotationType_===Z}(n)||(t[$][e]=n)}function H(t){return"object"==typeof t&&"string"==typeof t.kind}var z=Symbol("mobx administration"),G=function(){function t(t){void 0===t&&(t="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=Yt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.reportObserved=function(){return Ee(this)},e.reportChanged=function(){be(),Ae(this),we()},e.toString=function(){return this.name_},M(t,[{key:"isBeingObserved",get:function(){return D(this.flags_,t.isBeingObservedMask_)},set:function(e){this.flags_=x(this.flags_,t.isBeingObservedMask_,e)}},{key:"isPendingUnobservation",get:function(){return D(this.flags_,t.isPendingUnobservationMask_)},set:function(e){this.flags_=x(this.flags_,t.isPendingUnobservationMask_,e)}},{key:"diffValue",get:function(){return D(this.flags_,t.diffValueMask_)?1:0},set:function(e){this.flags_=x(this.flags_,t.diffValueMask_,1===e)}}])}();G.isBeingObservedMask_=1,G.isPendingUnobservationMask_=2,G.diffValueMask_=4;var W=T("Atom",G);function Q(t,e,n){void 0===e&&(e=m),void 0===n&&(n=m);var r,i=new G(t);return e!==m&&We(He,i,e,r),n!==m&&Ge(i,n),i}var X={identity:function(t,e){return t===e},structural:function(t,e){return mr(t,e)},default:function(t,e){return Object.is?Object.is(t,e):t===e?0!==t||1/t===1/e:t!==t&&e!==e},shallow:function(t,e){return mr(t,e,1)}};function J(t,e,n){return hn(t)?t:Array.isArray(t)?Lt.array(t,{name:n}):b(t)?Lt.object(t,void 0,{name:n}):S(t)?Lt.map(t,{name:n}):O(t)?Lt.set(t,{name:n}):"function"!==typeof t||Fe(t)||cn(t)?t:w(t)?an(t):je(n,t)}function Y(t){return t}var Z="override";function tt(t,e){return{annotationType_:t,options_:e,make_:et,extend_:nt,decorate_20223_:rt}}function et(t,e,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(t,e,n,!1)?0:1;if(r===t.target_)return null===this.extend_(t,e,n,!1)?0:2;if(Fe(n.value))return 1;var s=it(t,this,e,n,!1);return u(r,e,s),2}function nt(t,e,n,r){var i=it(t,this,e,n);return t.defineProperty_(e,i,r)}function rt(t,e){var n=e.kind,i=e.name,s=e.addInitializer,o=this;if("field"!=n){var a;if("method"==n)return Fe(t)||(t=function(t){var e,n,r,s;return Kt(null!=(e=null==(n=o.options_)?void 0:n.name)?e:i.toString(),t,null!=(r=null==(s=o.options_)?void 0:s.autoAction)&&r)}(t)),null!=(a=this.options_)&&a.bound&&s((function(){var t=this,e=t[i].bind(t);e.isMobxAction=!0,t[i]=e})),t;r("Cannot apply '"+o.annotationType_+"' to '"+String(i)+"' (kind: "+n+"):\n'"+o.annotationType_+"' can only be used on properties with a function value.")}else s((function(){K(this,i,o)}))}function it(t,e,n,r,i){var s,o,a,u,c,l,h,f;void 0===i&&(i=me.safeDescriptors),f=r,e.annotationType_,f.value;var d,p=r.value;null!=(s=e.options_)&&s.bound&&(p=p.bind(null!=(d=t.proxy_)?d:t.target_));return{value:Kt(null!=(o=null==(a=e.options_)?void 0:a.name)?o:n.toString(),p,null!=(u=null==(c=e.options_)?void 0:c.autoAction)&&u,null!=(l=e.options_)&&l.bound?null!=(h=t.proxy_)?h:t.target_:void 0),configurable:!i||t.isPlainObject_,enumerable:!1,writable:!i}}function st(t,e){return{annotationType_:t,options_:e,make_:ot,extend_:at,decorate_20223_:ut}}function ot(t,e,n,r){var i;if(r===t.target_)return null===this.extend_(t,e,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!k(t.target_,e)||!cn(t.target_[e]))&&null===this.extend_(t,e,n,!1))return 0;if(cn(n.value))return 1;var s=ct(t,this,e,n,!1,!1);return u(r,e,s),2}function at(t,e,n,r){var i,s=ct(t,this,e,n,null==(i=this.options_)?void 0:i.bound);return t.defineProperty_(e,s,r)}function ut(t,e){var n;var r=e.name,i=e.addInitializer;return cn(t)||(t=an(t)),null!=(n=this.options_)&&n.bound&&i((function(){var t=this,e=t[r].bind(t);e.isMobXFlow=!0,t[r]=e})),t}function ct(t,e,n,r,i,s){var o;void 0===s&&(s=me.safeDescriptors),o=r,e.annotationType_,o.value;var a,u=r.value;(cn(u)||(u=an(u)),i)&&((u=u.bind(null!=(a=t.proxy_)?a:t.target_)).isMobXFlow=!0);return{value:u,configurable:!s||t.isPlainObject_,enumerable:!1,writable:!s}}function lt(t,e){return{annotationType_:t,options_:e,make_:ht,extend_:ft,decorate_20223_:dt}}function ht(t,e,n){return null===this.extend_(t,e,n,!1)?0:1}function ft(t,e,n,r){return function(t,e,n,r){e.annotationType_,r.get;0}(0,this,0,n),t.defineComputedProperty_(e,V({},this.options_,{get:n.get,set:n.set}),r)}function dt(t,e){var n=this,r=e.name;return(0,e.addInitializer)((function(){var e=Wn(this)[z],i=V({},n.options_,{get:t,context:this});i.name||(i.name="ObservableObject."+r.toString()),e.values_.set(r,new Jt(i))})),function(){return this[z].getObservablePropValue_(r)}}function pt(t,e){return{annotationType_:t,options_:e,make_:gt,extend_:mt,decorate_20223_:vt}}function gt(t,e,n){return null===this.extend_(t,e,n,!1)?0:1}function mt(t,e,n,r){var i,s;return function(t,e){e.annotationType_;0}(0,this),t.defineObservableProperty_(e,n.value,null!=(i=null==(s=this.options_)?void 0:s.enhancer)?i:J,r)}function vt(t,e){var n=this,r=e.kind,i=e.name,s=new WeakSet;function o(t,e){var r,o,a=Wn(t)[z],u=new Qt(e,null!=(r=null==(o=n.options_)?void 0:o.enhancer)?r:J,"ObservableObject."+i.toString(),!1);a.values_.set(i,u),s.add(t)}if("accessor"==r)return{get:function(){return s.has(this)||o(this,t.get.call(this)),this[z].getObservablePropValue_(i)},set:function(t){return s.has(this)||o(this,t),this[z].setObservablePropValue_(i,t)},init:function(t){return s.has(this)||o(this,t),t}}}var yt="true",_t=bt();function bt(t){return{annotationType_:yt,options_:t,make_:wt,extend_:Et,decorate_20223_:At}}function wt(t,e,n,r){var i,s,o,a;if(n.get)return jt.make_(t,e,n,r);if(n.set){var c=Kt(e.toString(),n.set);return r===t.target_?null===t.defineProperty_(e,{configurable:!me.safeDescriptors||t.isPlainObject_,set:c})?0:2:(u(r,e,{configurable:!0,set:c}),2)}if(r!==t.target_&&"function"===typeof n.value)return w(n.value)?(null!=(a=this.options_)&&a.autoBind?an.bound:an).make_(t,e,n,r):(null!=(o=this.options_)&&o.autoBind?je.bound:je).make_(t,e,n,r);var l,h=!1===(null==(i=this.options_)?void 0:i.deep)?Lt.ref:Lt;"function"===typeof n.value&&null!=(s=this.options_)&&s.autoBind&&(n.value=n.value.bind(null!=(l=t.proxy_)?l:t.target_));return h.make_(t,e,n,r)}function Et(t,e,n,r){var i,s,o;if(n.get)return jt.extend_(t,e,n,r);if(n.set)return t.defineProperty_(e,{configurable:!me.safeDescriptors||t.isPlainObject_,set:Kt(e.toString(),n.set)},r);"function"===typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(o=t.proxy_)?o:t.target_));return(!1===(null==(s=this.options_)?void 0:s.deep)?Lt.ref:Lt).extend_(t,e,n,r)}function At(t,e){r("'"+this.annotationType_+"' cannot be used as a decorator")}var Tt={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function St(t){return t||Tt}Object.freeze(Tt);var Ot=pt("observable"),Ct=pt("observable.ref",{enhancer:Y}),It=pt("observable.shallow",{enhancer:function(t,e,n){return void 0===t||null===t||Jn(t)||Mn(t)||Bn(t)||Kn(t)?t:Array.isArray(t)?Lt.array(t,{name:n,deep:!1}):b(t)?Lt.object(t,void 0,{name:n,deep:!1}):S(t)?Lt.map(t,{name:n,deep:!1}):O(t)?Lt.set(t,{name:n,deep:!1}):void 0}}),Rt=pt("observable.struct",{enhancer:function(t,e){return mr(t,e)?e:t}}),kt=q(Ot);function Nt(t){return!0===t.deep?J:!1===t.deep?Y:function(t){var e,n;return t&&null!=(e=null==(n=t.options_)?void 0:n.enhancer)?e:J}(t.defaultDecorator)}function Dt(t,e,n){return H(e)?Ot.decorate_20223_(t,e):y(e)?void K(t,e,Ot):hn(t)?t:b(t)?Lt.object(t,e,n):Array.isArray(t)?Lt.array(t,e):S(t)?Lt.map(t,e):O(t)?Lt.set(t,e):"object"===typeof t&&null!==t?t:Lt.box(t,e)}o(Dt,kt);var xt,Pt,Lt=o(Dt,{box:function(t,e){var n=St(e);return new Qt(t,Nt(n),n.name,!0,n.equals)},array:function(t,e){var n=St(e);return(!1===me.useProxies||!1===n.proxy?lr:Rn)(t,Nt(n),n.name)},map:function(t,e){var n=St(e);return new Fn(t,Nt(n),n.name)},set:function(t,e){var n=St(e);return new qn(t,Nt(n),n.name)},object:function(t,e,n){return pr((function(){return Ze(!1===me.useProxies||!1===(null==n?void 0:n.proxy)?Wn({},n):function(t,e){var n,r;return p(),t=Wn(t,e),null!=(r=(n=t[z]).proxy_)?r:n.proxy_=new Proxy(t,vn)}({},n),t,e)}))},ref:q(Ct),shallow:q(It),deep:kt,struct:q(Rt)}),Mt="computed",Ut=lt(Mt),Vt=lt("computed.struct",{equals:X.structural}),jt=function(t,e){if(H(e))return Ut.decorate_20223_(t,e);if(y(e))return K(t,e,Ut);if(b(t))return q(lt(Mt,t));var n=b(e)?e:{};return n.get=t,n.name||(n.name=t.name||""),new Jt(n)};Object.assign(jt,Ut),jt.struct=q(Vt);var Ft=0,Bt=1,$t=null!=(xt=null==(Pt=a((function(){}),"name"))?void 0:Pt.configurable)&&xt,qt={value:"action",configurable:!0,writable:!1,enumerable:!1};function Kt(t,e,n,r){function i(){return Ht(t,n,e,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,i.toString=function(){return e.toString()},$t&&(qt.value=t,u(i,"name",qt)),i}function Ht(t,e,n,i,s){var o=function(t,e){var n=!1,r=0;0;var i=me.trackingDerivation,s=!e||!i;be();var o=me.allowStateChanges;s&&(ue(),o=Gt(!0));var a=le(!0),u={runAsAction_:s,prevDerivation_:i,prevAllowStateChanges_:o,prevAllowStateReads_:a,notifySpy_:n,startTime_:r,actionId_:Bt++,parentActionId_:Ft};return Ft=u.actionId_,u}(0,e);try{return n.apply(i,s)}catch(a){throw o.error_=a,a}finally{!function(t){Ft!==t.actionId_&&r(30);Ft=t.parentActionId_,void 0!==t.error_&&(me.suppressReactionErrors=!0);Wt(t.prevAllowStateChanges_),he(t.prevAllowStateReads_),we(),t.runAsAction_&&ce(t.prevDerivation_);0;me.suppressReactionErrors=!1}(o)}}function zt(t,e){var n=Gt(t);try{return e()}finally{Wt(n)}}function Gt(t){var e=me.allowStateChanges;return me.allowStateChanges=t,e}function Wt(t){me.allowStateChanges=t}var Qt=function(t){function e(e,n,r,i,s){var o;return void 0===r&&(r="ObservableValue"),void 0===i&&(i=!0),void 0===s&&(s=X.default),(o=t.call(this,r)||this).enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=n,o.name_=r,o.equals=s,o.value_=n(e,void 0,r),o}j(e,t);var n=e.prototype;return n.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},n.set=function(t){this.value_;if((t=this.prepareNewValue_(t))!==me.UNCHANGED){0,this.setNewValue_(t)}},n.prepareNewValue_=function(t){if(ie(this),yn(this)){var e=bn(this,{object:this,type:On,newValue:t});if(!e)return me.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value_,this.name_),this.equals(this.value_,t)?me.UNCHANGED:t},n.setNewValue_=function(t){var e=this.value_;this.value_=t,this.reportChanged(),wn(this)&&An(this,{type:On,object:this,newValue:t,oldValue:e})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(t){return _n(this,t)},n.observe_=function(t,e){return e&&t({observableKind:"value",debugObjectName:this.name_,object:this,type:On,newValue:this.value_,oldValue:void 0}),En(this,t)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return R(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},e}(G),Xt=T("ObservableValue",Qt),Jt=function(){function t(t){this.dependenciesState_=Yt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Yt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new ee(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Zt.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||r(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=Kt("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?X.structural:X.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){!function(t){if(t.lowestObserverState_!==Yt.UP_TO_DATE_)return;t.lowestObserverState_=Yt.POSSIBLY_STALE_,t.observers_.forEach((function(t){t.dependenciesState_===Yt.UP_TO_DATE_&&(t.dependenciesState_=Yt.POSSIBLY_STALE_,t.onBecomeStale_())}))}(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.get=function(){if(this.isComputing&&r(32,this.name_,this.derivation),0!==me.inBatch||0!==this.observers_.size||this.keepAlive_){if(Ee(this),re(this)){var t=me.trackingContext;this.keepAlive_&&!t&&(me.trackingContext=this),this.trackAndCompute()&&function(t){if(t.lowestObserverState_===Yt.STALE_)return;t.lowestObserverState_=Yt.STALE_,t.observers_.forEach((function(e){e.dependenciesState_===Yt.POSSIBLY_STALE_?e.dependenciesState_=Yt.STALE_:e.dependenciesState_===Yt.UP_TO_DATE_&&(t.lowestObserverState_=Yt.UP_TO_DATE_)}))}(this),me.trackingContext=t}}else re(this)&&(this.warnAboutUntrackedRead_(),be(),this.value_=this.computeValue_(!1),we());var e=this.value_;if(ne(e))throw e.cause;return e},e.set=function(t){if(this.setter_){this.isRunningSetter&&r(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,t)}finally{this.isRunningSetter=!1}}else r(34,this.name_)},e.trackAndCompute=function(){var t=this.value_,e=this.dependenciesState_===Yt.NOT_TRACKING_,n=this.computeValue_(!0),r=e||ne(t)||ne(n)||!this.equals_(t,n);return r&&(this.value_=n),r},e.computeValue_=function(t){this.isComputing=!0;var e,n=Gt(!1);if(t)e=se(this,this.derivation,this.scope_);else if(!0===me.disableErrorBoundaries)e=this.derivation.call(this.scope_);else try{e=this.derivation.call(this.scope_)}catch(r){e=new ee(r)}return Wt(n),this.isComputing=!1,e},e.suspend_=function(){this.keepAlive_||(oe(this),this.value_=void 0)},e.observe_=function(t,e){var n=this,r=!0,i=void 0;return Be((function(){var s=n.get();if(!r||e){var o=ue();t({observableKind:"computed",debugObjectName:n.name_,type:On,object:n,newValue:s,oldValue:i}),ce(o)}r=!1,i=s}))},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return R(this.get())},e[Symbol.toPrimitive]=function(){return this.valueOf()},M(t,[{key:"isComputing",get:function(){return D(this.flags_,t.isComputingMask_)},set:function(e){this.flags_=x(this.flags_,t.isComputingMask_,e)}},{key:"isRunningSetter",get:function(){return D(this.flags_,t.isRunningSetterMask_)},set:function(e){this.flags_=x(this.flags_,t.isRunningSetterMask_,e)}},{key:"isBeingObserved",get:function(){return D(this.flags_,t.isBeingObservedMask_)},set:function(e){this.flags_=x(this.flags_,t.isBeingObservedMask_,e)}},{key:"isPendingUnobservation",get:function(){return D(this.flags_,t.isPendingUnobservationMask_)},set:function(e){this.flags_=x(this.flags_,t.isPendingUnobservationMask_,e)}},{key:"diffValue",get:function(){return D(this.flags_,t.diffValueMask_)?1:0},set:function(e){this.flags_=x(this.flags_,t.diffValueMask_,1===e)}}])}();Jt.isComputingMask_=1,Jt.isRunningSetterMask_=2,Jt.isBeingObservedMask_=4,Jt.isPendingUnobservationMask_=8,Jt.diffValueMask_=16;var Yt,Zt,te=T("ComputedValue",Jt);!function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"}(Yt||(Yt={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(Zt||(Zt={}));var ee=function(t){this.cause=void 0,this.cause=t};function ne(t){return t instanceof ee}function re(t){switch(t.dependenciesState_){case Yt.UP_TO_DATE_:return!1;case Yt.NOT_TRACKING_:case Yt.STALE_:return!0;case Yt.POSSIBLY_STALE_:for(var e=le(!0),n=ue(),r=t.observing_,i=r.length,s=0;s<i;s++){var o=r[s];if(te(o)){if(me.disableErrorBoundaries)o.get();else try{o.get()}catch(a){return ce(n),he(e),!0}if(t.dependenciesState_===Yt.STALE_)return ce(n),he(e),!0}}return fe(t),ce(n),he(e),!1}}function ie(t){}function se(t,e,n){var r=le(!0);fe(t),t.newObserving_=new Array(0===t.runId_?100:t.observing_.length),t.unboundDepsCount_=0,t.runId_=++me.runId;var i,s=me.trackingDerivation;if(me.trackingDerivation=t,me.inBatch++,!0===me.disableErrorBoundaries)i=e.call(n);else try{i=e.call(n)}catch(o){i=new ee(o)}return me.inBatch--,me.trackingDerivation=s,function(t){for(var e=t.observing_,n=t.observing_=t.newObserving_,r=Yt.UP_TO_DATE_,i=0,s=t.unboundDepsCount_,o=0;o<s;o++){var a=n[o];0===a.diffValue&&(a.diffValue=1,i!==o&&(n[i]=a),i++),a.dependenciesState_>r&&(r=a.dependenciesState_)}n.length=i,t.newObserving_=null,s=e.length;for(;s--;){var u=e[s];0===u.diffValue&&ye(u,t),u.diffValue=0}for(;i--;){var c=n[i];1===c.diffValue&&(c.diffValue=0,ve(c,t))}r!==Yt.UP_TO_DATE_&&(t.dependenciesState_=r,t.onBecomeStale_())}(t),he(r),i}function oe(t){var e=t.observing_;t.observing_=[];for(var n=e.length;n--;)ye(e[n],t);t.dependenciesState_=Yt.NOT_TRACKING_}function ae(t){var e=ue();try{return t()}finally{ce(e)}}function ue(){var t=me.trackingDerivation;return me.trackingDerivation=null,t}function ce(t){me.trackingDerivation=t}function le(t){var e=me.allowStateReads;return me.allowStateReads=t,e}function he(t){me.allowStateReads=t}function fe(t){if(t.dependenciesState_!==Yt.UP_TO_DATE_){t.dependenciesState_=Yt.UP_TO_DATE_;for(var e=t.observing_,n=e.length;n--;)e[n].lowestObserverState_=Yt.UP_TO_DATE_}}var de=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},pe=!0,ge=!1,me=function(){var t=s();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(pe=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new de).version&&(pe=!1),pe?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new de):(setTimeout((function(){ge||r(35)}),1),new de)}();function ve(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function ye(t,e){t.observers_.delete(e),0===t.observers_.size&&_e(t)}function _e(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,me.pendingUnobservations.push(t))}function be(){me.inBatch++}function we(){if(0===--me.inBatch){Ce();for(var t=me.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers_.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof Jt&&n.suspend_())}me.pendingUnobservations=[]}}function Ee(t){var e=me.trackingDerivation;return null!==e?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved&&me.trackingContext&&(t.isBeingObserved=!0,t.onBO())),t.isBeingObserved):(0===t.observers_.size&&me.inBatch>0&&_e(t),!1)}function Ae(t){t.lowestObserverState_!==Yt.STALE_&&(t.lowestObserverState_=Yt.STALE_,t.observers_.forEach((function(t){t.dependenciesState_===Yt.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=Yt.STALE_})))}var Te=function(){function t(t,e,n,r){void 0===t&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Yt.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=Zt.NONE,this.name_=t,this.onInvalidate_=e,this.errorHandler_=n,this.requiresObservable_=r}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled||(this.isScheduled=!0,me.pendingReactions.push(this),Ce())},e.runReaction_=function(){if(!this.isDisposed){be(),this.isScheduled=!1;var t=me.trackingContext;if(me.trackingContext=this,re(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}me.trackingContext=t,we()}},e.track=function(t){if(!this.isDisposed){be();0,this.isRunning=!0;var e=me.trackingContext;me.trackingContext=this;var n=se(this,t,void 0);me.trackingContext=e,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&oe(this),ne(n)&&this.reportExceptionInDerivation_(n.cause),we()}},e.reportExceptionInDerivation_=function(t){var e=this;if(this.errorHandler_)this.errorHandler_(t,this);else{if(me.disableErrorBoundaries)throw t;var n="[mobx] uncaught error in '"+this+"'";me.suppressReactionErrors||console.error(n,t),me.globalReactionErrorHandlers.forEach((function(n){return n(t,e)}))}},e.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(be(),oe(this),we()))},e.getDisposer_=function(t){var e=this,n=function n(){e.dispose(),null==t||null==t.removeEventListener||t.removeEventListener("abort",n)};return null==t||null==t.addEventListener||t.addEventListener("abort",n),n[z]=this,n},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(t){void 0===t&&(t=!1)},M(t,[{key:"isDisposed",get:function(){return D(this.flags_,t.isDisposedMask_)},set:function(e){this.flags_=x(this.flags_,t.isDisposedMask_,e)}},{key:"isScheduled",get:function(){return D(this.flags_,t.isScheduledMask_)},set:function(e){this.flags_=x(this.flags_,t.isScheduledMask_,e)}},{key:"isTrackPending",get:function(){return D(this.flags_,t.isTrackPendingMask_)},set:function(e){this.flags_=x(this.flags_,t.isTrackPendingMask_,e)}},{key:"isRunning",get:function(){return D(this.flags_,t.isRunningMask_)},set:function(e){this.flags_=x(this.flags_,t.isRunningMask_,e)}},{key:"diffValue",get:function(){return D(this.flags_,t.diffValueMask_)?1:0},set:function(e){this.flags_=x(this.flags_,t.diffValueMask_,1===e)}}])}();Te.isDisposedMask_=1,Te.isScheduledMask_=2,Te.isTrackPendingMask_=4,Te.isRunningMask_=8,Te.diffValueMask_=16;var Se=100,Oe=function(t){return t()};function Ce(){me.inBatch>0||me.isRunningReactions||Oe(Ie)}function Ie(){me.isRunningReactions=!0;for(var t=me.pendingReactions,e=0;t.length>0;){++e===Se&&(console.error("[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}me.isRunningReactions=!1}var Re=T("Reaction",Te);var ke="action",Ne="autoAction",De="<unnamed action>",xe=tt(ke),Pe=tt("action.bound",{bound:!0}),Le=tt(Ne,{autoAction:!0}),Me=tt("autoAction.bound",{autoAction:!0,bound:!0});function Ue(t){return function(e,n){return v(e)?Kt(e.name||De,e,t):v(n)?Kt(e,n,t):H(n)?(t?Le:xe).decorate_20223_(e,n):y(n)?K(e,n,t?Le:xe):y(e)?q(tt(t?Ne:ke,{name:e,autoAction:t})):void 0}}var Ve=Ue(!1);Object.assign(Ve,xe);var je=Ue(!0);function Fe(t){return v(t)&&!0===t.isMobxAction}function Be(t,e){var n,r,i,s;void 0===e&&(e=h);var o,a=null!=(n=null==(r=e)?void 0:r.name)?n:"Autorun";if(!e.scheduler&&!e.delay)o=new Te(a,(function(){this.track(l)}),e.onError,e.requiresObservable);else{var u=qe(e),c=!1;o=new Te(a,(function(){c||(c=!0,u((function(){c=!1,o.isDisposed||o.track(l)})))}),e.onError,e.requiresObservable)}function l(){t(o)}return null!=(i=e)&&null!=(i=i.signal)&&i.aborted||o.schedule_(),o.getDisposer_(null==(s=e)?void 0:s.signal)}Object.assign(je,Le),Ve.bound=q(Pe),je.bound=q(Me);var $e=function(t){return t()};function qe(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:$e}function Ke(t,e,n){var r,i,s;void 0===n&&(n=h);var o,a,u,c=null!=(r=n.name)?r:"Reaction",l=Ve(c,n.onError?(o=n.onError,a=e,function(){try{return a.apply(this,arguments)}catch(t){o.call(this,t)}}):e),f=!n.scheduler&&!n.delay,d=qe(n),p=!0,g=!1,m=n.compareStructural?X.structural:n.equals||X.default,v=new Te(c,(function(){p||f?y():g||(g=!0,d(y))}),n.onError,n.requiresObservable);function y(){if(g=!1,!v.isDisposed){var e=!1,r=u;v.track((function(){var n=zt(!1,(function(){return t(v)}));e=p||!m(u,n),u=n})),(p&&n.fireImmediately||!p&&e)&&l(u,r,v),p=!1}}return null!=(i=n)&&null!=(i=i.signal)&&i.aborted||v.schedule_(),v.getDisposer_(null==(s=n)?void 0:s.signal)}var He="onBO",ze="onBUO";function Ge(t,e,n){return We(ze,t,e,n)}function We(t,e,n,r){var i="function"===typeof r?hr(e,n):hr(e),s=v(r)?r:n,o=t+"L";return i[o]?i[o].add(s):i[o]=new Set([s]),function(){var t=i[o];t&&(t.delete(s),0===t.size&&delete i[o])}}var Qe="never",Xe="always",Je="observed";function Ye(t){!0===t.isolateGlobalState&&function(){if((me.pendingReactions.length||me.inBatch||me.isRunningReactions)&&r(36),ge=!0,pe){var t=s();0===--t.__mobxInstanceCount&&(t.__mobxGlobals=void 0),me=new de}}();var e=t.useProxies,n=t.enforceActions;if(void 0!==e&&(me.useProxies=e===Xe||e!==Qe&&"undefined"!==typeof Proxy),"ifavailable"===e&&(me.verifyProxies=!0),void 0!==n){var i=n===Xe?Xe:n===Je;me.enforceActions=i,me.allowStateChanges=!0!==i&&i!==Xe}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(e){e in t&&(me[e]=!!t[e])})),me.allowStateReads=!me.observableRequiresReaction,t.reactionScheduler&&function(t){var e=Oe;Oe=function(n){return t((function(){return e(n)}))}}(t.reactionScheduler)}function Ze(t,e,n,r){var i=N(e);return pr((function(){var e=Wn(t,r)[z];I(i).forEach((function(t){e.extend_(t,i[t],!n||(!(t in n)||n[t]))}))})),t}function tn(t,e){return en(hr(t,e))}function en(t){var e,n={name:t.name_};return t.observing_&&t.observing_.length>0&&(n.dependencies=(e=t.observing_,Array.from(new Set(e))).map(en)),n}var nn=0;function rn(){this.message="FLOW_CANCELLED"}rn.prototype=Object.create(Error.prototype);var sn=st("flow"),on=st("flow.bound",{bound:!0}),an=Object.assign((function(t,e){if(H(e))return sn.decorate_20223_(t,e);if(y(e))return K(t,e,sn);var n=t,r=n.name||"<unnamed flow>",i=function(){var t,e=arguments,i=++nn,s=Ve(r+" - runid: "+i+" - init",n).apply(this,e),o=void 0,a=new Promise((function(e,n){var a=0;function u(t){var e;o=void 0;try{e=Ve(r+" - runid: "+i+" - yield "+a++,s.next).call(s,t)}catch(u){return n(u)}l(e)}function c(t){var e;o=void 0;try{e=Ve(r+" - runid: "+i+" - yield "+a++,s.throw).call(s,t)}catch(u){return n(u)}l(e)}function l(t){if(!v(null==t?void 0:t.then))return t.done?e(t.value):(o=Promise.resolve(t.value)).then(u,c);t.then(l,n)}t=n,u(void 0)}));return a.cancel=Ve(r+" - runid: "+i+" - cancel",(function(){try{o&&un(o);var e=s.return(void 0),n=Promise.resolve(e.value);n.then(m,m),un(n),t(new rn)}catch(r){t(r)}})),a};return i.isMobXFlow=!0,i}),sn);function un(t){v(t.cancel)&&t.cancel()}function cn(t){return!0===(null==t?void 0:t.isMobXFlow)}function ln(t,e){return!!t&&(void 0!==e?!!Jn(t)&&t[z].values_.has(e):Jn(t)||!!t[z]||W(t)||Re(t)||te(t))}function hn(t){return ln(t)}function fn(t,e,n){return t.set(e,n),n}function dn(t,e){if(null==t||"object"!==typeof t||t instanceof Date||!hn(t))return t;if(Xt(t)||te(t))return dn(t.get(),e);if(e.has(t))return e.get(t);if(Mn(t)){var n=fn(e,t,new Array(t.length));return t.forEach((function(t,r){n[r]=dn(t,e)})),n}if(Kn(t)){var i=fn(e,t,new Set);return t.forEach((function(t){i.add(dn(t,e))})),i}if(Bn(t)){var s=fn(e,t,new Map);return t.forEach((function(t,n){s.set(n,dn(t,e))})),s}var o=fn(e,t,{});return function(t){if(Jn(t))return t[z].ownKeys_();r(38)}(t).forEach((function(n){c.propertyIsEnumerable.call(t,n)&&(o[n]=dn(t[n],e))})),o}function pn(t,e){return dn(t,new Map)}function gn(t,e){void 0===e&&(e=void 0),be();try{return t.apply(e)}finally{we()}}function mn(t){return t[z]}an.bound=q(on);var vn={has:function(t,e){return mn(t).has_(e)},get:function(t,e){return mn(t).get_(e)},set:function(t,e,n){var r;return!!y(e)&&(null==(r=mn(t).set_(e,n,!0))||r)},deleteProperty:function(t,e){var n;return!!y(e)&&(null==(n=mn(t).delete_(e,!0))||n)},defineProperty:function(t,e,n){var r;return null==(r=mn(t).defineProperty_(e,n))||r},ownKeys:function(t){return mn(t).ownKeys_()},preventExtensions:function(t){r(13)}};function yn(t){return void 0!==t.interceptors_&&t.interceptors_.length>0}function _n(t,e){var n=t.interceptors_||(t.interceptors_=[]);return n.push(e),g((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function bn(t,e){var n=ue();try{for(var i=[].concat(t.interceptors_||[]),s=0,o=i.length;s<o&&((e=i[s](e))&&!e.type&&r(14),e);s++);return e}finally{ce(n)}}function wn(t){return void 0!==t.changeListeners_&&t.changeListeners_.length>0}function En(t,e){var n=t.changeListeners_||(t.changeListeners_=[]);return n.push(e),g((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function An(t,e){var n=ue(),r=t.changeListeners_;if(r){for(var i=0,s=(r=r.slice()).length;i<s;i++)r[i](e);ce(n)}}function Tn(t,e,n){return pr((function(){var r=Wn(t,n)[z];null!=e||(e=function(t){return k(t,$)||E(t,$,V({},t[$])),t[$]}(t)),I(e).forEach((function(t){return r.make_(t,e[t])}))})),t}var Sn="splice",On="update",Cn={get:function(t,e){var n=t[z];return e===z?n:"length"===e?n.getArrayLength_():"string"!==typeof e||isNaN(e)?k(kn,e)?kn[e]:t[e]:n.get_(parseInt(e))},set:function(t,e,n){var r=t[z];return"length"===e&&r.setArrayLength_(n),"symbol"===typeof e||isNaN(e)?t[e]=n:r.set_(parseInt(e),n),!0},preventExtensions:function(){r(15)}},In=function(){function t(t,e,n,r){void 0===t&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new G(t),this.enhancer_=function(t,n){return e(t,n,"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.dehanceValues_=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},e.intercept_=function(t){return _n(this,t)},e.observe_=function(t,e){return void 0===e&&(e=!1),e&&t({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),En(this,t)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(t){("number"!==typeof t||isNaN(t)||t<0)&&r("Out of range: "+t);var e=this.values_.length;if(t!==e)if(t>e){for(var n=new Array(t-e),i=0;i<t-e;i++)n[i]=void 0;this.spliceWithArray_(e,0,n)}else this.spliceWithArray_(t,e-t)},e.updateArrayLength_=function(t,e){t!==this.lastKnownLength_&&r(16),this.lastKnownLength_+=e,this.legacyMode_&&e>0&&cr(t+e+1)},e.spliceWithArray_=function(t,e,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===t?t=0:t>i?t=i:t<0&&(t=Math.max(0,i+t)),e=1===arguments.length?i-t:void 0===e||null===e?0:Math.max(0,Math.min(e,i-t)),void 0===n&&(n=l),yn(this)){var s=bn(this,{object:this.proxy_,type:Sn,index:t,removedCount:e,added:n});if(!s)return l;e=s.removedCount,n=s.added}if(n=0===n.length?n:n.map((function(t){return r.enhancer_(t,void 0)})),this.legacyMode_){var o=n.length-e;this.updateArrayLength_(i,o)}var a=this.spliceItemsIntoValues_(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice_(t,n,a),this.dehanceValues_(a)},e.spliceItemsIntoValues_=function(t,e,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[t,e].concat(n));var i=this.values_.slice(t,t+e),s=this.values_.slice(t+e);this.values_.length+=n.length-e;for(var o=0;o<n.length;o++)this.values_[t+o]=n[o];for(var a=0;a<s.length;a++)this.values_[t+n.length+a]=s[a];return i},e.notifyArrayChildUpdate_=function(t,e,n){var r=!this.owned_&&!1,i=wn(this),s=i||r?{observableKind:"array",object:this.proxy_,type:On,debugObjectName:this.atom_.name_,index:t,newValue:e,oldValue:n}:null;this.atom_.reportChanged(),i&&An(this,s)},e.notifyArraySplice_=function(t,e,n){var r=!this.owned_&&!1,i=wn(this),s=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Sn,index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;this.atom_.reportChanged(),i&&An(this,s)},e.get_=function(t){if(!(this.legacyMode_&&t>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[t]);console.warn("[mobx] Out of bounds read: "+t)},e.set_=function(t,e){var n=this.values_;if(this.legacyMode_&&t>n.length&&r(17,t,n.length),t<n.length){this.atom_;var i=n[t];if(yn(this)){var s=bn(this,{type:On,object:this.proxy_,index:t,newValue:e});if(!s)return;e=s.newValue}(e=this.enhancer_(e,i))!==i&&(n[t]=e,this.notifyArrayChildUpdate_(t,e,i))}else{for(var o=new Array(t+1-n.length),a=0;a<o.length-1;a++)o[a]=void 0;o[o.length-1]=e,this.spliceWithArray_(n.length,0,o)}},t}();function Rn(t,e,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),p(),pr((function(){var i=new In(n,e,r,!1);A(i.values_,z,i);var s=new Proxy(i.values_,Cn);return i.proxy_=s,t&&t.length&&i.spliceWithArray_(0,0,t),s}))}var kn={clear:function(){return this.splice(0)},replace:function(t){var e=this[z];return e.spliceWithArray_(0,e.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=this[z];switch(arguments.length){case 0:return[];case 1:return s.spliceWithArray_(t);case 2:return s.spliceWithArray_(t,e)}return s.spliceWithArray_(t,e,r)},spliceWithArray:function(t,e,n){return this[z].spliceWithArray_(t,e,n)},push:function(){for(var t=this[z],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[z].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[z],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return me.trackingDerivation&&r(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){me.trackingDerivation&&r(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var e=this[z],n=e.dehanceValues_(e.values_).indexOf(t);return n>-1&&(this.splice(n,1),!0)}};function Nn(t,e){"function"===typeof Array.prototype[t]&&(kn[t]=e(t))}function Dn(t){return function(){var e=this[z];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_);return n[t].apply(n,arguments)}}function xn(t){return function(e,n){var r=this,i=this[z];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[t]((function(t,i){return e.call(n,t,i,r)}))}}function Pn(t){return function(){var e=this,n=this[z];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(t,n,r){return i(t,n,r,e)},r[t].apply(r,arguments)}}Nn("at",Dn),Nn("concat",Dn),Nn("flat",Dn),Nn("includes",Dn),Nn("indexOf",Dn),Nn("join",Dn),Nn("lastIndexOf",Dn),Nn("slice",Dn),Nn("toString",Dn),Nn("toLocaleString",Dn),Nn("toSorted",Dn),Nn("toSpliced",Dn),Nn("with",Dn),Nn("every",xn),Nn("filter",xn),Nn("find",xn),Nn("findIndex",xn),Nn("findLast",xn),Nn("findLastIndex",xn),Nn("flatMap",xn),Nn("forEach",xn),Nn("map",xn),Nn("some",xn),Nn("toReversed",xn),Nn("reduce",Pn),Nn("reduceRight",Pn);var Ln=T("ObservableArrayAdministration",In);function Mn(t){return _(t)&&Ln(t[z])}var Un={},Vn="add",jn="delete",Fn=function(){function t(t,e,n){var i=this;void 0===e&&(e=J),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[z]=Un,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=e,this.name_=n,v(Map)||r(18),pr((function(){i.keysAtom_=Q("ObservableMap.keys()"),i.data_=new Map,i.hasMap_=new Map,t&&i.merge(t)}))}var e=t.prototype;return e.has_=function(t){return this.data_.has(t)},e.has=function(t){var e=this;if(!me.trackingDerivation)return this.has_(t);var n=this.hasMap_.get(t);if(!n){var r=n=new Qt(this.has_(t),Y,"ObservableMap.key?",!1);this.hasMap_.set(t,r),Ge(r,(function(){return e.hasMap_.delete(t)}))}return n.get()},e.set=function(t,e){var n=this.has_(t);if(yn(this)){var r=bn(this,{type:n?On:Vn,object:this,newValue:e,name:t});if(!r)return this;e=r.newValue}return n?this.updateValue_(t,e):this.addValue_(t,e),this},e.delete=function(t){var e=this;if((this.keysAtom_,yn(this))&&!bn(this,{type:jn,object:this,name:t}))return!1;if(this.has_(t)){var n=wn(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:jn,object:this,oldValue:this.data_.get(t).value_,name:t}:null;return gn((function(){var n;e.keysAtom_.reportChanged(),null==(n=e.hasMap_.get(t))||n.setNewValue_(!1),e.data_.get(t).setNewValue_(void 0),e.data_.delete(t)})),n&&An(this,r),!0}return!1},e.updateValue_=function(t,e){var n=this.data_.get(t);if((e=n.prepareNewValue_(e))!==me.UNCHANGED){var r=wn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:On,object:this,oldValue:n.value_,name:t,newValue:e}:null;0,n.setNewValue_(e),r&&An(this,i)}},e.addValue_=function(t,e){var n=this;this.keysAtom_,gn((function(){var r,i=new Qt(e,n.enhancer_,"ObservableMap.key",!1);n.data_.set(t,i),e=i.value_,null==(r=n.hasMap_.get(t))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=wn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:Vn,object:this,name:t,newValue:e}:null;r&&An(this,i)},e.get=function(t){return this.has(t)?this.dehanceValue_(this.data_.get(t).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var t=this,e=this.keys();return _r({next:function(){var n=e.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:t.get(i)}}})},e.entries=function(){var t=this,e=this.keys();return _r({next:function(){var n=e.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,t.get(i)]}}})},e[Symbol.iterator]=function(){return this.entries()},e.forEach=function(t,e){for(var n,r=U(this);!(n=r()).done;){var i=n.value,s=i[0],o=i[1];t.call(e,o,s,this)}},e.merge=function(t){var e=this;return Bn(t)&&(t=new Map(t)),gn((function(){b(t)?function(t){var e=Object.keys(t);if(!C)return e;var n=Object.getOwnPropertySymbols(t);return n.length?[].concat(e,n.filter((function(e){return c.propertyIsEnumerable.call(t,e)}))):e}(t).forEach((function(n){return e.set(n,t[n])})):Array.isArray(t)?t.forEach((function(t){var n=t[0],r=t[1];return e.set(n,r)})):S(t)?(function(t){var e=Object.getPrototypeOf(t),n=Object.getPrototypeOf(e);return null===Object.getPrototypeOf(n)}(t)||r(19,t),t.forEach((function(t,n){return e.set(n,t)}))):null!==t&&void 0!==t&&r(20,t)})),this},e.clear=function(){var t=this;gn((function(){ae((function(){for(var e,n=U(t.keys());!(e=n()).done;){var r=e.value;t.delete(r)}}))}))},e.replace=function(t){var e=this;return gn((function(){for(var n,i=function(t){if(S(t)||Bn(t))return t;if(Array.isArray(t))return new Map(t);if(b(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}return r(21,t)}(t),s=new Map,o=!1,a=U(e.data_.keys());!(n=a()).done;){var u=n.value;if(!i.has(u))if(e.delete(u))o=!0;else{var c=e.data_.get(u);s.set(u,c)}}for(var l,h=U(i.entries());!(l=h()).done;){var f=l.value,d=f[0],p=f[1],g=e.data_.has(d);if(e.set(d,p),e.data_.has(d)){var m=e.data_.get(d);s.set(d,m),g||(o=!0)}}if(!o)if(e.data_.size!==s.size)e.keysAtom_.reportChanged();else for(var v=e.data_.keys(),y=s.keys(),_=v.next(),w=y.next();!_.done;){if(_.value!==w.value){e.keysAtom_.reportChanged();break}_=v.next(),w=y.next()}e.data_=s})),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(t,e){return En(this,t)},e.intercept_=function(t){return _n(this,t)},M(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),Bn=T("ObservableMap",Fn);var $n={},qn=function(){function t(t,e,n){var i=this;void 0===e&&(e=J),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[z]=$n,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,v(Set)||r(22),this.enhancer_=function(t,r){return e(t,r,n)},pr((function(){i.atom_=Q(i.name_),t&&i.replace(t)}))}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.clear=function(){var t=this;gn((function(){ae((function(){for(var e,n=U(t.data_.values());!(e=n()).done;){var r=e.value;t.delete(r)}}))}))},e.forEach=function(t,e){for(var n,r=U(this);!(n=r()).done;){var i=n.value;t.call(e,i,i,this)}},e.add=function(t){var e=this;if((this.atom_,yn(this))&&!bn(this,{type:Vn,object:this,newValue:t}))return this;if(!this.has(t)){gn((function(){e.data_.add(e.enhancer_(t,void 0)),e.atom_.reportChanged()}));var n=!1,r=wn(this),i=r?{observableKind:"set",debugObjectName:this.name_,type:Vn,object:this,newValue:t}:null;n,r&&An(this,i)}return this},e.delete=function(t){var e=this;if(yn(this)&&!bn(this,{type:jn,object:this,oldValue:t}))return!1;if(this.has(t)){var n=wn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:jn,object:this,oldValue:t}:null;return gn((function(){e.atom_.reportChanged(),e.data_.delete(t)})),n&&An(this,r),!0}return!1},e.has=function(t){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(t))},e.entries=function(){var t=0,e=Array.from(this.keys()),n=Array.from(this.values());return _r({next:function(){var r=t;return t+=1,r<n.length?{value:[e[r],n[r]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var t=this,e=0,n=Array.from(this.data_.values());return _r({next:function(){return e<n.length?{value:t.dehanceValue_(n[e++]),done:!1}:{done:!0}}})},e.intersection=function(t){return O(t)?t.intersection(this):new Set(this).intersection(t)},e.union=function(t){return O(t)?t.union(this):new Set(this).union(t)},e.difference=function(t){return new Set(this).difference(t)},e.symmetricDifference=function(t){return O(t)?t.symmetricDifference(this):new Set(this).symmetricDifference(t)},e.isSubsetOf=function(t){return new Set(this).isSubsetOf(t)},e.isSupersetOf=function(t){return new Set(this).isSupersetOf(t)},e.isDisjointFrom=function(t){return O(t)?t.isDisjointFrom(this):new Set(this).isDisjointFrom(t)},e.replace=function(t){var e=this;return Kn(t)&&(t=new Set(t)),gn((function(){Array.isArray(t)||O(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!==t&&void 0!==t&&r("Cannot initialize set from "+t)})),this},e.observe_=function(t,e){return En(this,t)},e.intercept_=function(t){return _n(this,t)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Symbol.iterator]=function(){return this.values()},M(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),Kn=T("ObservableSet",qn),Hn=Object.create(null),zn="remove",Gn=function(){function t(t,e,n,r){void 0===e&&(e=new Map),void 0===r&&(r=_t),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=e,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new G("ObservableObject.keys"),this.isPlainObject_=b(this.target_)}var e=t.prototype;return e.getObservablePropValue_=function(t){return this.values_.get(t).get()},e.setObservablePropValue_=function(t,e){var n=this.values_.get(t);if(n instanceof Jt)return n.set(e),!0;if(yn(this)){var r=bn(this,{type:On,object:this.proxy_||this.target_,name:t,newValue:e});if(!r)return null;e=r.newValue}if((e=n.prepareNewValue_(e))!==me.UNCHANGED){var i=wn(this),s=i?{type:On,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:t,newValue:e}:null;0,n.setNewValue_(e),i&&An(this,s)}return!0},e.get_=function(t){return me.trackingDerivation&&!k(this.target_,t)&&this.has_(t),this.target_[t]},e.set_=function(t,e,n){return void 0===n&&(n=!1),k(this.target_,t)?this.values_.has(t)?this.setObservablePropValue_(t,e):n?Reflect.set(this.target_,t,e):(this.target_[t]=e,!0):this.extend_(t,{value:e,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},e.has_=function(t){if(!me.trackingDerivation)return t in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var e=this.pendingKeys_.get(t);return e||(e=new Qt(t in this.target_,Y,"ObservableObject.key?",!1),this.pendingKeys_.set(t,e)),e.get()},e.make_=function(t,e){if(!0===e&&(e=this.defaultAnnotation_),!1!==e){if(Zn(this,e,t),!(t in this.target_)){var n;if(null!=(n=this.target_[$])&&n[t])return;r(1,e.annotationType_,this.name_+"."+t.toString())}for(var i=this.target_;i&&i!==c;){var s=a(i,t);if(s){var o=e.make_(this,t,s,i);if(0===o)return;if(1===o)break}i=Object.getPrototypeOf(i)}Yn(this,e,t)}},e.extend_=function(t,e,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(t,e,r);Zn(this,n,t);var i=n.extend_(this,t,e,r);return i&&Yn(this,n,t),i},e.defineProperty_=function(t,e,n){void 0===n&&(n=!1),this.keysAtom_;try{be();var r=this.delete_(t);if(!r)return r;if(yn(this)){var i=bn(this,{object:this.proxy_||this.target_,name:t,type:Vn,newValue:e.value});if(!i)return null;var s=i.newValue;e.value!==s&&(e=V({},e,{value:s}))}if(n){if(!Reflect.defineProperty(this.target_,t,e))return!1}else u(this.target_,t,e);this.notifyPropertyAddition_(t,e.value)}finally{we()}return!0},e.defineObservableProperty_=function(t,e,n,r){void 0===r&&(r=!1),this.keysAtom_;try{be();var i=this.delete_(t);if(!i)return i;if(yn(this)){var s=bn(this,{object:this.proxy_||this.target_,name:t,type:Vn,newValue:e});if(!s)return null;e=s.newValue}var o=Xn(t),a={configurable:!me.safeDescriptors||this.isPlainObject_,enumerable:!0,get:o.get,set:o.set};if(r){if(!Reflect.defineProperty(this.target_,t,a))return!1}else u(this.target_,t,a);var c=new Qt(e,n,"ObservableObject.key",!1);this.values_.set(t,c),this.notifyPropertyAddition_(t,c.value_)}finally{we()}return!0},e.defineComputedProperty_=function(t,e,n){void 0===n&&(n=!1),this.keysAtom_;try{be();var r=this.delete_(t);if(!r)return r;if(yn(this))if(!bn(this,{object:this.proxy_||this.target_,name:t,type:Vn,newValue:void 0}))return null;e.name||(e.name="ObservableObject.key"),e.context=this.proxy_||this.target_;var i=Xn(t),s={configurable:!me.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,t,s))return!1}else u(this.target_,t,s);this.values_.set(t,new Jt(e)),this.notifyPropertyAddition_(t,void 0)}finally{we()}return!0},e.delete_=function(t,e){if(void 0===e&&(e=!1),this.keysAtom_,!k(this.target_,t))return!0;if(yn(this)&&!bn(this,{object:this.proxy_||this.target_,name:t,type:zn}))return null;try{var n;be();var r,i=wn(this),s=this.values_.get(t),o=void 0;if(!s&&i)o=null==(r=a(this.target_,t))?void 0:r.value;if(e){if(!Reflect.deleteProperty(this.target_,t))return!1}else delete this.target_[t];if(s&&(this.values_.delete(t),s instanceof Qt&&(o=s.value_),Ae(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(n=n.get(t))||n.set(t in this.target_),i){var u={type:zn,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:o,name:t};0,i&&An(this,u)}}finally{we()}return!0},e.observe_=function(t,e){return En(this,t)},e.intercept_=function(t){return _n(this,t)},e.notifyPropertyAddition_=function(t,e){var n,r=wn(this);if(r){var i=r?{type:Vn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:t,newValue:e}:null;0,r&&An(this,i)}null==(n=this.pendingKeys_)||null==(n=n.get(t))||n.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),I(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function Wn(t,e){var n;if(k(t,z))return t;var r=null!=(n=null==e?void 0:e.name)?n:"ObservableObject",i=new Gn(t,new Map,String(r),function(t){var e;return t?null!=(e=t.defaultDecorator)?e:bt(t):void 0}(e));return E(t,z,i),t}var Qn=T("ObservableObjectAdministration",Gn);function Xn(t){return Hn[t]||(Hn[t]={get:function(){return this[z].getObservablePropValue_(t)},set:function(e){return this[z].setObservablePropValue_(t,e)}})}function Jn(t){return!!_(t)&&Qn(t[z])}function Yn(t,e,n){var r;null==(r=t.target_[$])||delete r[n]}function Zn(t,e,n){}var tr,er,nr=ar(0),rr=function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,!1===t}(),ir=0,sr=function(){};tr=sr,er=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(tr.prototype,er):void 0!==tr.prototype.__proto__?tr.prototype.__proto__=er:tr.prototype=er;var or=function(t){function e(e,n,r,i){var s;return void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),s=t.call(this)||this,pr((function(){var t=new In(r,n,i,!0);t.proxy_=s,A(s,z,t),e&&e.length&&s.spliceWithArray(0,0,e),rr&&Object.defineProperty(s,"0",nr)})),s}j(e,t);var n=e.prototype;return n.concat=function(){this[z].atom_.reportObserved();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),e.map((function(t){return Mn(t)?t.slice():t})))},n[Symbol.iterator]=function(){var t=this,e=0;return _r({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})},M(e,[{key:"length",get:function(){return this[z].getArrayLength_()},set:function(t){this[z].setArrayLength_(t)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(sr);function ar(t){return{enumerable:!1,configurable:!0,get:function(){return this[z].get_(t)},set:function(e){this[z].set_(t,e)}}}function ur(t){u(or.prototype,""+t,ar(t))}function cr(t){if(t>ir){for(var e=ir;e<t+100;e++)ur(e);ir=t}}function lr(t,e,n){return new or(t,e,n)}function hr(t,e){if("object"===typeof t&&null!==t){if(Mn(t))return void 0!==e&&r(23),t[z].atom_;if(Kn(t))return t.atom_;if(Bn(t)){if(void 0===e)return t.keysAtom_;var n=t.data_.get(e)||t.hasMap_.get(e);return n||r(25,e,dr(t)),n}if(Jn(t)){if(!e)return r(26);var i=t[z].values_.get(e);return i||r(27,e,dr(t)),i}if(W(t)||te(t)||Re(t))return t}else if(v(t)&&Re(t[z]))return t[z];r(28)}function fr(t,e){return t||r(29),void 0!==e?fr(hr(t,e)):W(t)||te(t)||Re(t)||Bn(t)||Kn(t)?t:t[z]?t[z]:void r(24,t)}function dr(t,e){var n;if(void 0!==e)n=hr(t,e);else{if(Fe(t))return t.name;n=Jn(t)||Bn(t)||Kn(t)?fr(t):hr(t)}return n.name_}function pr(t){var e=ue(),n=Gt(!0);be();try{return t()}finally{we(),Wt(n),ce(e)}}Object.entries(kn).forEach((function(t){var e=t[0],n=t[1];"concat"!==e&&E(or.prototype,e,n)})),cr(1e3);var gr=c.toString;function mr(t,e,n){return void 0===n&&(n=-1),vr(t,e,n)}function vr(t,e,n,r,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return!1;if(t!==t)return e!==e;var s=typeof t;if("function"!==s&&"object"!==s&&"object"!=typeof e)return!1;var o=gr.call(t);if(o!==gr.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t===""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e;case"[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++}t=yr(t),e=yr(e);var a="[object Array]"===o;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var u=t.constructor,c=e.constructor;if(u!==c&&!(v(u)&&u instanceof u&&v(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var l=(r=r||[]).length;l--;)if(r[l]===t)return i[l]===e;if(r.push(t),i.push(e),a){if((l=t.length)!==e.length)return!1;for(;l--;)if(!vr(t[l],e[l],n-1,r,i))return!1}else{var h,f=Object.keys(t);if(l=f.length,Object.keys(e).length!==l)return!1;for(;l--;)if(!k(e,h=f[l])||!vr(t[h],e[h],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function yr(t){return Mn(t)?t.slice():S(t)||Bn(t)||O(t)||Kn(t)?Array.from(t.entries()):t}function _r(t){return t[Symbol.iterator]=br,t}function br(){return this}["Symbol","Map","Set"].forEach((function(t){"undefined"===typeof s()[t]&&r("MobX requires global '"+t+"' to be available or polyfilled")})),"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:dr},$mobx:z})},7150:(t,e,n)=>{n.d(e,{MF:()=>ct,j6:()=>st,om:()=>it,Sx:()=>ht,Wp:()=>lt,KO:()=>ft});var r=n(8812),i=n(443),s=n(7700);const o=(t,e)=>e.some((e=>t instanceof e));let a,u;const c=new WeakMap,l=new WeakMap,h=new WeakMap,f=new WeakMap,d=new WeakMap;let p={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return l.get(t);if("objectStoreNames"===e)return t.objectStoreNames||h.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function g(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(u||(u=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(y(this),n),v(c.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return v(t.apply(y(this),n))}:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=t.call(y(this),e,...r);return h.set(s,e.sort?e.sort():[e]),v(s)}}function m(t){return"function"===typeof t?g(t):(t instanceof IDBTransaction&&function(t){if(l.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));l.set(t,e)}(t),o(t,a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,p):t)}function v(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(v(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&c.set(e,t)})).catch((()=>{})),d.set(e,t),e}(t);if(f.has(t))return f.get(t);const e=m(t);return e!==t&&(f.set(t,e),d.set(e,t)),e}const y=t=>d.get(t);const _=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function E(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(w.get(e))return w.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!_.includes(n))return;const s=async function(t){const e=this.transaction(t,i?"readwrite":"readonly");let s=e.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&e.done]))[0]};return w.set(e,s),s}p=(t=>({...t,get:(e,n,r)=>E(e,n)||t.get(e,n,r),has:(e,n)=>!!E(e,n)||t.has(e,n)}))(p);class A{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const T="@firebase/app",S="0.10.8",O=new i.Vy("@firebase/app"),C="@firebase/app-compat",I="@firebase/analytics-compat",R="@firebase/analytics",k="@firebase/app-check-compat",N="@firebase/app-check",D="@firebase/auth",x="@firebase/auth-compat",P="@firebase/database",L="@firebase/database-compat",M="@firebase/functions",U="@firebase/functions-compat",V="@firebase/installations",j="@firebase/installations-compat",F="@firebase/messaging",B="@firebase/messaging-compat",$="@firebase/performance",q="@firebase/performance-compat",K="@firebase/remote-config",H="@firebase/remote-config-compat",z="@firebase/storage",G="@firebase/storage-compat",W="@firebase/firestore",Q="@firebase/vertexai-preview",X="@firebase/firestore-compat",J="firebase",Y="[DEFAULT]",Z={[T]:"fire-core",[C]:"fire-core-compat",[R]:"fire-analytics",[I]:"fire-analytics-compat",[N]:"fire-app-check",[k]:"fire-app-check-compat",[D]:"fire-auth",[x]:"fire-auth-compat",[P]:"fire-rtdb",[L]:"fire-rtdb-compat",[M]:"fire-fn",[U]:"fire-fn-compat",[V]:"fire-iid",[j]:"fire-iid-compat",[F]:"fire-fcm",[B]:"fire-fcm-compat",[$]:"fire-perf",[q]:"fire-perf-compat",[K]:"fire-rc",[H]:"fire-rc-compat",[z]:"fire-gcs",[G]:"fire-gcs-compat",[W]:"fire-fst",[X]:"fire-fst-compat",[Q]:"fire-vertex","fire-js":"fire-js",[J]:"fire-js-all"},tt=new Map,et=new Map,nt=new Map;function rt(t,e){try{t.container.addComponent(e)}catch(n){O.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function it(t){const e=t.name;if(nt.has(e))return O.debug(`There were multiple attempts to register component ${e}.`),!1;nt.set(e,t);for(const n of tt.values())rt(n,t);for(const n of et.values())rt(n,t);return!0}function st(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const ot={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},at=new s.FA("app","Firebase",ot);class ut{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw at.create("app-deleted",{appName:this._name})}}const ct="10.12.5";function lt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){e={name:e}}const i=Object.assign({name:Y,automaticDataCollectionEnabled:!1},e),o=i.name;if("string"!==typeof o||!o)throw at.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.T9)()),!n)throw at.create("no-options");const a=tt.get(o);if(a){if((0,s.bD)(n,a.options)&&(0,s.bD)(i,a.config))return a;throw at.create("duplicate-app",{appName:o})}const u=new r.h1(o);for(const r of nt.values())u.addComponent(r);const c=new ut(n,i,u);return tt.set(o,c),c}function ht(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;const e=tt.get(t);if(!e&&t===Y&&(0,s.T9)())return lt();if(!e)throw at.create("no-app",{appName:t});return e}function ft(t,e,n){var i;let s=null!==(i=Z[t])&&void 0!==i?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void O.warn(t.join(" "))}it(new r.uA(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}const dt="firebase-heartbeat-database",pt=1,gt="firebase-heartbeat-store";let mt=null;function vt(){return mt||(mt=function(t,e){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(t,e),a=v(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(v(o.result),t.oldVersion,t.newVersion,v(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(dt,pt,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(gt)}catch(n){console.warn(n)}}}).catch((t=>{throw at.create("idb-open",{originalErrorMessage:t.message})}))),mt}async function yt(t,e){try{const n=(await vt()).transaction(gt,"readwrite"),r=n.objectStore(gt);await r.put(e,_t(t)),await n.done}catch(n){if(n instanceof s.g)O.warn(n.message);else{const t=at.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});O.warn(t.message)}}}function _t(t){return`${t.name}!${t.options.appId}`}class bt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Et(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wt();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((t=>t.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=wt(),{heartbeatsToSend:n,unsentEntries:r}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),At(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),At(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,s.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function wt(){return(new Date).toISOString().substring(0,10)}class Et{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await vt()).transaction(gt),n=await e.objectStore(gt).get(_t(t));return await e.done,n}catch(e){if(e instanceof s.g)O.warn(e.message);else{const t=at.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});O.warn(t.message)}}}(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return yt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return yt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function At(t){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:t})).length}var Tt;Tt="",it(new r.uA("platform-logger",(t=>new A(t)),"PRIVATE")),it(new r.uA("heartbeat",(t=>new bt(t)),"PRIVATE")),ft(T,S,Tt),ft(T,S,"esm2017"),ft("fire-js","")},8812:(t,e,n)=>{n.d(e,{h1:()=>a,uA:()=>i});var r=n(7700);class i{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const s="[DEFAULT]";class o{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new r.cY;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:r});n.resolve(t)}catch(e){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(r){}}getOrInitializeService(t){let{instanceIdentifier:e,options:n={}}=t,r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===s?void 0:i),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?t:s:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new o(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},443:(t,e,n)=>{n.d(e,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},u=function(t,e){if(e<t.logLevel)return;const n=(new Date).toISOString(),r=a[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${t.name}:`,...s)};class c{constructor(t){this.name=t,this._logLevel=o,this._logHandler=u,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in i))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?s[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}},6213:(t,e,n)=>{n.d(e,{A:()=>_e});var r={};function i(t,e){return function(){return t.apply(e,arguments)}}n.r(r),n.d(r,{hasBrowserEnv:()=>ct,hasStandardBrowserEnv:()=>lt,hasStandardBrowserWebWorkerEnv:()=>ft,origin:()=>dt});const{toString:s}=Object.prototype,{getPrototypeOf:o}=Object,a=(u=Object.create(null),t=>{const e=s.call(t);return u[e]||(u[e]=e.slice(8,-1).toLowerCase())});var u;const c=t=>(t=t.toLowerCase(),e=>a(e)===t),l=t=>e=>typeof e===t,{isArray:h}=Array,f=l("undefined");const d=c("ArrayBuffer");const p=l("string"),g=l("function"),m=l("number"),v=t=>null!==t&&"object"===typeof t,y=t=>{if("object"!==a(t))return!1;const e=o(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},_=c("Date"),b=c("File"),w=c("Blob"),E=c("FileList"),A=c("URLSearchParams"),[T,S,O,C]=["ReadableStream","Request","Response","Headers"].map(c);function I(t,e){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),h(t))for(n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else{const r=i?Object.getOwnPropertyNames(t):Object.keys(t),s=r.length;let o;for(n=0;n<s;n++)o=r[n],e.call(null,t[o],o,t)}}function R(t,e){e=e.toLowerCase();const n=Object.keys(t);let r,i=n.length;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const k="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,N=t=>!f(t)&&t!==k;const D=(x="undefined"!==typeof Uint8Array&&o(Uint8Array),t=>x&&t instanceof x);var x;const P=c("HTMLFormElement"),L=(t=>{let{hasOwnProperty:e}=t;return(t,n)=>e.call(t,n)})(Object.prototype),M=c("RegExp"),U=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};I(n,((n,i)=>{let s;!1!==(s=e(n,i,t))&&(r[i]=s||n)})),Object.defineProperties(t,r)},V="abcdefghijklmnopqrstuvwxyz",j="0123456789",F={DIGIT:j,ALPHA:V,ALPHA_DIGIT:V+V.toUpperCase()+j};const B=c("AsyncFunction"),$=((t,e)=>{return t?setImmediate:e?(n=`axios@${Math.random()}`,r=[],k.addEventListener("message",(t=>{let{source:e,data:i}=t;e===k&&i===n&&r.length&&r.shift()()}),!1),t=>{r.push(t),k.postMessage(n,"*")}):t=>setTimeout(t);var n,r})("function"===typeof setImmediate,g(k.postMessage)),q="undefined"!==typeof queueMicrotask?queueMicrotask.bind(k):"undefined"!==typeof process&&process.nextTick||$,K={isArray:h,isArrayBuffer:d,isBuffer:function(t){return null!==t&&!f(t)&&null!==t.constructor&&!f(t.constructor)&&g(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||g(t.append)&&("formdata"===(e=a(t))||"object"===e&&g(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&d(t.buffer),e},isString:p,isNumber:m,isBoolean:t=>!0===t||!1===t,isObject:v,isPlainObject:y,isReadableStream:T,isRequest:S,isResponse:O,isHeaders:C,isUndefined:f,isDate:_,isFile:b,isBlob:w,isRegExp:M,isFunction:g,isStream:t=>v(t)&&g(t.pipe),isURLSearchParams:A,isTypedArray:D,isFileList:E,forEach:I,merge:function t(){const{caseless:e}=N(this)&&this||{},n={},r=(r,i)=>{const s=e&&R(n,i)||i;y(n[s])&&y(r)?n[s]=t(n[s],r):y(r)?n[s]=t({},r):h(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&I(arguments[i],r);return n},extend:function(t,e,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return I(e,((e,r)=>{n&&g(e)?t[r]=i(e,n):t[r]=e}),{allOwnKeys:r}),t},trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,r)=>{let i,s,a;const u={};if(e=e||{},null==t)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],r&&!r(a,t,e)||u[a]||(e[a]=t[a],u[a]=!0);t=!1!==n&&o(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:a,kindOfTest:c,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},toArray:t=>{if(!t)return null;if(h(t))return t;let e=t.length;if(!m(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const n=r.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const r=[];for(;null!==(n=t.exec(e));)r.push(n);return r},isHTMLForm:P,hasOwnProperty:L,hasOwnProp:L,reduceDescriptors:U,freezeMethods:t=>{U(t,((e,n)=>{if(g(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];g(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(t,e)=>{const n={},r=t=>{t.forEach((t=>{n[t]=!0}))};return h(t)?r(t):r(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e,findKey:R,global:k,isContextDefined:N,ALPHABET:F,generateString:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.ALPHA_DIGIT,n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n},isSpecCompliantForm:function(t){return!!(t&&g(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),n=(t,r)=>{if(v(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const i=h(t)?[]:{};return I(t,((t,e)=>{const s=n(t,r+1);!f(s)&&(i[e]=s)})),e[r]=void 0,i}}return t};return n(t,0)},isAsyncFn:B,isThenable:t=>t&&(v(t)||g(t))&&g(t.then)&&g(t.catch),setImmediate:$,asap:q};function H(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}K.inherits(H,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const z=H.prototype,G={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{G[t]={value:t}})),Object.defineProperties(H,G),Object.defineProperty(z,"isAxiosError",{value:!0}),H.from=(t,e,n,r,i,s)=>{const o=Object.create(z);return K.toFlatObject(t,o,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),H.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const W=H;function Q(t){return K.isPlainObject(t)||K.isArray(t)}function X(t){return K.endsWith(t,"[]")?t.slice(0,-2):t}function J(t,e,n){return t?t.concat(e).map((function(t,e){return t=X(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const Y=K.toFlatObject(K,{},null,(function(t){return/^is[A-Z]/.test(t)}));const Z=function(t,e,n){if(!K.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const r=(n=K.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!K.isUndefined(e[t])}))).metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&K.isSpecCompliantForm(e);if(!K.isFunction(i))throw new TypeError("visitor must be a function");function u(t){if(null===t)return"";if(K.isDate(t))return t.toISOString();if(!a&&K.isBlob(t))throw new W("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(t)||K.isTypedArray(t)?a&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function c(t,n,i){let a=t;if(t&&!i&&"object"===typeof t)if(K.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else if(K.isArray(t)&&function(t){return K.isArray(t)&&!t.some(Q)}(t)||(K.isFileList(t)||K.endsWith(n,"[]"))&&(a=K.toArray(t)))return n=X(n),a.forEach((function(t,r){!K.isUndefined(t)&&null!==t&&e.append(!0===o?J([n],r,s):null===o?n:n+"[]",u(t))})),!1;return!!Q(t)||(e.append(J(i,n,s),u(t)),!1)}const l=[],h=Object.assign(Y,{defaultVisitor:c,convertValue:u,isVisitable:Q});if(!K.isObject(t))throw new TypeError("data must be an object");return function t(n,r){if(!K.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),K.forEach(n,(function(n,s){!0===(!(K.isUndefined(n)||null===n)&&i.call(e,n,K.isString(s)?s.trim():s,r,h))&&t(n,r?r.concat(s):[s])})),l.pop()}}(t),e};function tt(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function et(t,e){this._pairs=[],t&&Z(t,this,e)}const nt=et.prototype;nt.append=function(t,e){this._pairs.push([t,e])},nt.toString=function(t){const e=t?function(e){return t.call(this,e,tt)}:tt;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const rt=et;function it(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function st(t,e,n){if(!e)return t;const r=n&&n.encode||it,i=n&&n.serialize;let s;if(s=i?i(e,n):K.isURLSearchParams(e)?e.toString():new rt(e,n).toString(r),s){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+s}return t}const ot=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){K.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},at={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ut={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:rt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ct="undefined"!==typeof window&&"undefined"!==typeof document,lt=(ht="undefined"!==typeof navigator&&navigator.product,ct&&["ReactNative","NativeScript","NS"].indexOf(ht)<0);var ht;const ft="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,dt=ct&&window.location.href||"http://localhost",pt={...r,...ut};const gt=function(t){function e(t,n,r,i){let s=t[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=t.length;if(s=!s&&K.isArray(r)?r.length:s,a)return K.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&K.isObject(r[s])||(r[s]=[]);return e(t,n,r[s],i)&&K.isArray(r[s])&&(r[s]=function(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}(r[s])),!o}if(K.isFormData(t)&&K.isFunction(t.entries)){const n={};return K.forEachEntry(t,((t,r)=>{e(function(t){return K.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),r,n,0)})),n}return null};const mt={transitional:at,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,i=K.isObject(t);i&&K.isHTMLForm(t)&&(t=new FormData(t));if(K.isFormData(t))return r?JSON.stringify(gt(t)):t;if(K.isArrayBuffer(t)||K.isBuffer(t)||K.isStream(t)||K.isFile(t)||K.isBlob(t)||K.isReadableStream(t))return t;if(K.isArrayBufferView(t))return t.buffer;if(K.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Z(t,new pt.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,r){return pt.isNode&&K.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((s=K.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Z(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||r?(e.setContentType("application/json",!1),function(t,e,n){if(K.isString(t))try{return(e||JSON.parse)(t),K.trim(t)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||mt.transitional,n=e&&e.forcedJSONParsing,r="json"===this.responseType;if(K.isResponse(t)||K.isReadableStream(t))return t;if(t&&K.isString(t)&&(n&&!this.responseType||r)){const n=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(i){if(n){if("SyntaxError"===i.name)throw W.from(i,W.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pt.classes.FormData,Blob:pt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],(t=>{mt.headers[t]={}}));const vt=mt,yt=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_t=Symbol("internals");function bt(t){return t&&String(t).trim().toLowerCase()}function wt(t){return!1===t||null==t?t:K.isArray(t)?t.map(wt):String(t)}function Et(t,e,n,r,i){return K.isFunction(r)?r.call(this,e,n):(i&&(e=n),K.isString(e)?K.isString(r)?-1!==e.indexOf(r):K.isRegExp(r)?r.test(e):void 0:void 0)}class At{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function i(t,e,n){const i=bt(e);if(!i)throw new Error("header name must be a non-empty string");const s=K.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||e]=wt(t))}const s=(t,e)=>K.forEach(t,((t,n)=>i(t,n,e)));if(K.isPlainObject(t)||t instanceof this.constructor)s(t,e);else if(K.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))s((t=>{const e={};let n,r,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),r=t.substring(i+1).trim(),!n||e[n]&&yt[n]||("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)})),e})(t),e);else if(K.isHeaders(t))for(const[o,a]of t.entries())i(a,o,n);else null!=t&&i(e,t,n);return this}get(t,e){if(t=bt(t)){const n=K.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}(t);if(K.isFunction(e))return e.call(this,t,n);if(K.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=bt(t)){const n=K.findKey(this,t);return!(!n||void 0===this[n]||e&&!Et(0,this[n],n,e))}return!1}delete(t,e){const n=this;let r=!1;function i(t){if(t=bt(t)){const i=K.findKey(n,t);!i||e&&!Et(0,n[i],i,e)||(delete n[i],r=!0)}}return K.isArray(t)?t.forEach(i):i(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const i=e[n];t&&!Et(0,this[i],i,t,!0)||(delete this[i],r=!0)}return r}normalize(t){const e=this,n={};return K.forEach(this,((r,i)=>{const s=K.findKey(n,i);if(s)return e[s]=wt(r),void delete e[i];const o=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete e[i],e[o]=wt(r),n[o]=!0})),this}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.constructor.concat(this,...e)}toJSON(t){const e=Object.create(null);return K.forEach(this,((n,r)=>{null!=n&&!1!==n&&(e[r]=t&&K.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((t=>{let[e,n]=t;return e+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t){const e=new this(t);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((t=>e.set(t))),e}static accessor(t){const e=(this[_t]=this[_t]={accessors:{}}).accessors,n=this.prototype;function r(t){const r=bt(t);e[r]||(!function(t,e){const n=K.toCamelCase(" "+e);["get","set","has"].forEach((r=>{Object.defineProperty(t,r+n,{value:function(t,n,i){return this[r].call(this,e,t,n,i)},configurable:!0})}))}(n,t),e[r]=!0)}return K.isArray(t)?t.forEach(r):r(t),this}}At.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),K.reduceDescriptors(At.prototype,((t,e)=>{let{value:n}=t,r=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(t){this[r]=t}}})),K.freezeMethods(At);const Tt=At;function St(t,e){const n=this||vt,r=e||n,i=Tt.from(r.headers);let s=r.data;return K.forEach(t,(function(t){s=t.call(n,s,i.normalize(),e?e.status:void 0)})),i.normalize(),s}function Ot(t){return!(!t||!t.__CANCEL__)}function Ct(t,e,n){W.call(this,null==t?"canceled":t,W.ERR_CANCELED,e,n),this.name="CanceledError"}K.inherits(Ct,W,{__CANCEL__:!0});const It=Ct;function Rt(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new W("Request failed with status code "+n.status,[W.ERR_BAD_REQUEST,W.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}const kt=function(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i,s=0,o=0;return e=void 0!==e?e:1e3,function(a){const u=Date.now(),c=r[o];i||(i=u),n[s]=a,r[s]=u;let l=o,h=0;for(;l!==s;)h+=n[l++],l%=t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),u-i<e)return;const f=c&&u-c;return f?Math.round(1e3*h/f):void 0}};const Nt=function(t,e){let n,r,i=0,s=1e3/e;const o=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=s,n=null,r&&(clearTimeout(r),r=null),t.apply(null,e)};return[function(){const t=Date.now(),e=t-i;for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];e>=s?o(u,t):(n=u,r||(r=setTimeout((()=>{r=null,o(n)}),s-e)))},()=>n&&o(n)]},Dt=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=kt(50,250);return Nt((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-r,u=i(a);r=s;t({loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:u||void 0,estimated:u&&o&&s<=o?(o-s)/u:void 0,event:n,lengthComputable:null!=o,[e?"download":"upload"]:!0})}),n)},xt=(t,e)=>{const n=null!=t;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Pt=t=>function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return K.asap((()=>t(...n)))},Lt=pt.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function r(n){let r=n;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=r(window.location.href),function(t){const e=K.isString(t)?r(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0},Mt=pt.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];K.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),K.isString(r)&&o.push("path="+r),K.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ut(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const Vt=t=>t instanceof Tt?{...t}:t;function jt(t,e){e=e||{};const n={};function r(t,e,n){return K.isPlainObject(t)&&K.isPlainObject(e)?K.merge.call({caseless:n},t,e):K.isPlainObject(e)?K.merge({},e):K.isArray(e)?e.slice():e}function i(t,e,n){return K.isUndefined(e)?K.isUndefined(t)?void 0:r(void 0,t,n):r(t,e,n)}function s(t,e){if(!K.isUndefined(e))return r(void 0,e)}function o(t,e){return K.isUndefined(e)?K.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function a(n,i,s){return s in e?r(n,i):s in t?r(void 0,n):void 0}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(t,e)=>i(Vt(t),Vt(e),!0)};return K.forEach(Object.keys(Object.assign({},t,e)),(function(r){const s=u[r]||i,o=s(t[r],e[r],r);K.isUndefined(o)&&s!==a||(n[r]=o)})),n}const Ft=t=>{const e=jt({},t);let n,{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:u}=e;if(e.headers=a=Tt.from(a),e.url=st(Ut(e.baseURL,e.url),t.params,t.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),K.isFormData(r))if(pt.hasStandardBrowserEnv||pt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[t,...e]=n?n.split(";").map((t=>t.trim())).filter(Boolean):[];a.setContentType([t||"multipart/form-data",...e].join("; "))}if(pt.hasStandardBrowserEnv&&(i&&K.isFunction(i)&&(i=i(e)),i||!1!==i&&Lt(e.url))){const t=s&&o&&Mt.read(o);t&&a.set(s,t)}return e},Bt="undefined"!==typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){const r=Ft(t);let i=r.data;const s=Tt.from(r.headers).normalize();let o,a,u,c,l,{responseType:h,onUploadProgress:f,onDownloadProgress:d}=r;function p(){c&&c(),l&&l(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let g=new XMLHttpRequest;function m(){if(!g)return;const r=Tt.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());Rt((function(t){e(t),p()}),(function(t){n(t),p()}),{data:h&&"text"!==h&&"json"!==h?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:t,request:g}),g=null}g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(n(new W("Request aborted",W.ECONNABORTED,t,g)),g=null)},g.onerror=function(){n(new W("Network Error",W.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let e=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||at;r.timeoutErrorMessage&&(e=r.timeoutErrorMessage),n(new W(e,i.clarifyTimeoutError?W.ETIMEDOUT:W.ECONNABORTED,t,g)),g=null},void 0===i&&s.setContentType(null),"setRequestHeader"in g&&K.forEach(s.toJSON(),(function(t,e){g.setRequestHeader(e,t)})),K.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),h&&"json"!==h&&(g.responseType=r.responseType),d&&([u,l]=Dt(d,!0),g.addEventListener("progress",u)),f&&g.upload&&([a,c]=Dt(f),g.upload.addEventListener("progress",a),g.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(o=e=>{g&&(n(!e||e.type?new It(null,t,g):e),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const v=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(r.url);v&&-1===pt.protocols.indexOf(v)?n(new W("Unsupported protocol "+v+":",W.ERR_BAD_REQUEST,t)):g.send(i||null)}))},$t=(t,e)=>{let n,r=new AbortController;const i=function(t){if(!n){n=!0,o();const e=t instanceof Error?t:this.reason;r.abort(e instanceof W?e:new It(e instanceof Error?e.message:e))}};let s=e&&setTimeout((()=>{i(new W(`timeout ${e} of ms exceeded`,W.ETIMEDOUT))}),e);const o=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach((t=>{t&&(t.removeEventListener?t.removeEventListener("abort",i):t.unsubscribe(i))})),t=null)};t.forEach((t=>t&&t.addEventListener&&t.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]},qt=function*(t,e){let n=t.byteLength;if(!e||n<e)return void(yield t);let r,i=0;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},Kt=(t,e,n,r,i)=>{const s=async function*(t,e,n){for await(const r of t)yield*qt(ArrayBuffer.isView(r)?r:await n(String(r)),e)}(t,e,i);let o,a=0,u=t=>{o||(o=!0,r&&r(t))};return new ReadableStream({async pull(t){try{const{done:e,value:r}=await s.next();if(e)return u(),void t.close();let i=r.byteLength;if(n){let t=a+=i;n(t)}t.enqueue(new Uint8Array(r))}catch(e){throw u(e),e}},cancel:t=>(u(t),s.return())},{highWaterMark:2})},Ht="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,zt=Ht&&"function"===typeof ReadableStream,Gt=Ht&&("function"===typeof TextEncoder?(Wt=new TextEncoder,t=>Wt.encode(t)):async t=>new Uint8Array(await new Response(t).arrayBuffer()));var Wt;const Qt=function(t){try{for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return!!t(...n)}catch(i){return!1}},Xt=zt&&Qt((()=>{let t=!1;const e=new Request(pt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})),Jt=zt&&Qt((()=>K.isReadableStream(new Response("").body))),Yt={stream:Jt&&(t=>t.body)};var Zt;Ht&&(Zt=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((t=>{!Yt[t]&&(Yt[t]=K.isFunction(Zt[t])?e=>e[t]():(e,n)=>{throw new W(`Response type '${t}' is not supported`,W.ERR_NOT_SUPPORT,n)})})));const te=async(t,e)=>{const n=K.toFiniteNumber(t.getContentLength());return null==n?(async t=>null==t?0:K.isBlob(t)?t.size:K.isSpecCompliantForm(t)?(await new Request(t).arrayBuffer()).byteLength:K.isArrayBufferView(t)||K.isArrayBuffer(t)?t.byteLength:(K.isURLSearchParams(t)&&(t+=""),K.isString(t)?(await Gt(t)).byteLength:void 0))(e):n},ee={http:null,xhr:Bt,fetch:Ht&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:u,responseType:c,headers:l,withCredentials:h="same-origin",fetchOptions:f}=Ft(t);c=c?(c+"").toLowerCase():"text";let d,p,[g,m]=i||s||o?$t([i,s],o):[];const v=()=>{!d&&setTimeout((()=>{g&&g.unsubscribe()})),d=!0};let y;try{if(u&&Xt&&"get"!==n&&"head"!==n&&0!==(y=await te(l,r))){let t,n=new Request(e,{method:"POST",body:r,duplex:"half"});if(K.isFormData(r)&&(t=n.headers.get("content-type"))&&l.setContentType(t),n.body){const[t,e]=xt(y,Dt(Pt(u)));r=Kt(n.body,65536,t,e,Gt)}}K.isString(h)||(h=h?"include":"omit"),p=new Request(e,{...f,signal:g,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:r,duplex:"half",credentials:h});let i=await fetch(p);const s=Jt&&("stream"===c||"response"===c);if(Jt&&(a||s)){const t={};["status","statusText","headers"].forEach((e=>{t[e]=i[e]}));const e=K.toFiniteNumber(i.headers.get("content-length")),[n,r]=a&&xt(e,Dt(Pt(a),!0))||[];i=new Response(Kt(i.body,65536,n,(()=>{r&&r(),s&&v()}),Gt),t)}c=c||"text";let o=await Yt[K.findKey(Yt,c)||"text"](i,t);return!s&&v(),m&&m(),await new Promise(((e,n)=>{Rt(e,n,{data:o,headers:Tt.from(i.headers),status:i.status,statusText:i.statusText,config:t,request:p})}))}catch(_){if(v(),_&&"TypeError"===_.name&&/fetch/i.test(_.message))throw Object.assign(new W("Network Error",W.ERR_NETWORK,t,p),{cause:_.cause||_});throw W.from(_,_&&_.code,t,p)}})};K.forEach(ee,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(n){}Object.defineProperty(t,"adapterName",{value:e})}}));const ne=t=>`- ${t}`,re=t=>K.isFunction(t)||null===t||!1===t,ie=t=>{t=K.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){let e;if(n=t[s],r=n,!re(n)&&(r=ee[(e=String(n)).toLowerCase()],void 0===r))throw new W(`Unknown adapter '${e}'`);if(r)break;i[e||"#"+s]=r}if(!r){const t=Object.entries(i).map((t=>{let[e,n]=t;return`adapter ${e} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=e?t.length>1?"since :\n"+t.map(ne).join("\n"):" "+ne(t[0]):"as no adapter specified";throw new W("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function se(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new It(null,t)}function oe(t){se(t),t.headers=Tt.from(t.headers),t.data=St.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return ie(t.adapter||vt.adapter)(t).then((function(e){return se(t),e.data=St.call(t,t.transformResponse,e),e.headers=Tt.from(e.headers),e}),(function(e){return Ot(e)||(se(t),e&&e.response&&(e.response.data=St.call(t,t.transformResponse,e.response),e.response.headers=Tt.from(e.response.headers))),Promise.reject(e)}))}const ae="1.7.3",ue={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{ue[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const ce={};ue.transitional=function(t,e,n){function r(t,e){return"[Axios v1.7.3] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,i,s)=>{if(!1===t)throw new W(r(i," has been removed"+(e?" in "+e:"")),W.ERR_DEPRECATED);return e&&!ce[i]&&(ce[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,s)}};const le={assertOptions:function(t,e,n){if("object"!==typeof t)throw new W("options must be an object",W.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const e=t[s],n=void 0===e||o(e,s,t);if(!0!==n)throw new W("option "+s+" must be "+n,W.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new W("Unknown option "+s,W.ERR_BAD_OPTION)}},validators:ue},he=le.validators;class fe{constructor(t){this.defaults=t,this.interceptors={request:new ot,response:new ot}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const e=t.stack?t.stack.replace(/^.+\n/,""):"";try{n.stack?e&&!String(n.stack).endsWith(e.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+e):n.stack=e}catch(r){}}throw n}}_request(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},e=jt(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:i}=e;void 0!==n&&le.assertOptions(n,{silentJSONParsing:he.transitional(he.boolean),forcedJSONParsing:he.transitional(he.boolean),clarifyTimeoutError:he.transitional(he.boolean)},!1),null!=r&&(K.isFunction(r)?e.paramsSerializer={serialize:r}:le.assertOptions(r,{encode:he.function,serialize:he.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let s=i&&K.merge(i.common,i[e.method]);i&&K.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete i[t]})),e.headers=Tt.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,o.unshift(t.fulfilled,t.rejected))}));const u=[];let c;this.interceptors.response.forEach((function(t){u.push(t.fulfilled,t.rejected)}));let l,h=0;if(!a){const t=[oe.bind(this),void 0];for(t.unshift.apply(t,o),t.push.apply(t,u),l=t.length,c=Promise.resolve(e);h<l;)c=c.then(t[h++],t[h++]);return c}l=o.length;let f=e;for(h=0;h<l;){const t=o[h++],e=o[h++];try{f=t(f)}catch(d){e.call(this,d);break}}try{c=oe.call(this,f)}catch(d){return Promise.reject(d)}for(h=0,l=u.length;h<l;)c=c.then(u[h++],u[h++]);return c}getUri(t){return st(Ut((t=jt(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}K.forEach(["delete","get","head","options"],(function(t){fe.prototype[t]=function(e,n){return this.request(jt(n||{},{method:t,url:e,data:(n||{}).data}))}})),K.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(jt(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}fe.prototype[t]=e(),fe.prototype[t+"Form"]=e(!0)}));const de=fe;class pe{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const r=new Promise((t=>{n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t,r,i){n.reason||(n.reason=new It(t,r,i),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new pe((function(e){t=e})),cancel:t}}}const ge=pe;const me={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(me).forEach((t=>{let[e,n]=t;me[n]=e}));const ve=me;const ye=function t(e){const n=new de(e),r=i(de.prototype.request,n);return K.extend(r,de.prototype,n,{allOwnKeys:!0}),K.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return t(jt(e,n))},r}(vt);ye.Axios=de,ye.CanceledError=It,ye.CancelToken=ge,ye.isCancel=Ot,ye.VERSION=ae,ye.toFormData=Z,ye.AxiosError=W,ye.Cancel=ye.CanceledError,ye.all=function(t){return Promise.all(t)},ye.spread=function(t){return function(e){return t.apply(null,e)}},ye.isAxiosError=function(t){return K.isObject(t)&&!0===t.isAxiosError},ye.mergeConfig=jt,ye.AxiosHeaders=Tt,ye.formToJSON=t=>gt(K.isHTMLForm(t)?new FormData(t):t),ye.getAdapter=ie,ye.HttpStatusCode=ve,ye.default=ye;const _e=ye},7064:(t,e,n)=>{n.d(e,{Wp:()=>r.Wp});var r=n(7150);(0,r.KO)("firebase","10.12.5","app")},5472:(t,e,n)=>{n.d(e,{gS:()=>Is,rJ:()=>es,aU:()=>is});var r,i=n(7150),s=n(8812),o=n(443),a=n(7700),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},c={};(function(){var t;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(t,e,n){n||(n=0);var r=Array(16);if("string"===typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function i(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}(e,(function(){this.blockSize=-1})),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var r=e-this.blockSize,i=this.B,s=this.h,o=0;o<e;){if(0==s)for(;o<=r;)n(this,t,o),o+=this.blockSize;if("string"===typeof t){for(;o<e;)if(i[s++]=t.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<e;)if(i[s++]=t[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var s={};function o(t){return-128<=t&&128>t?function(t,e){var n=s;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(t){return new i([0|t],0>t?-1:0)})):new i([0|t],0>t?-1:0)}function a(t){if(isNaN(t)||!isFinite(t))return u;if(0>t)return p(a(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=4294967296;return new i(e,0)}var u=o(0),l=o(1),h=o(16777216);function f(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function d(t){return-1==t.h}function p(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new i(n,~t.h).add(l)}function g(t,e){return t.add(p(e))}function m(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function v(t,e){this.g=t,this.h=e}function y(t,e){if(f(e))throw Error("division by zero");if(f(t))return new v(u,u);if(d(t))return e=y(p(t),e),new v(p(e.g),p(e.h));if(d(e))return e=y(t,p(e)),new v(p(e.g),e.h);if(30<t.g.length){if(d(t)||d(e))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=e;0>=r.l(t);)n=_(n),r=_(r);var i=b(n,1),s=b(r,1);for(r=b(r,2),n=b(n,2);!f(r);){var o=s.add(r);0>=o.l(t)&&(i=i.add(n),s=o),r=b(r,1),n=b(n,1)}return e=g(t,i.j(e)),new v(i,e)}for(i=u;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=a(n)).j(e);d(o)||0<o.l(t);)o=(s=a(n-=r)).j(e);f(s)&&(s=l),i=i.add(s),t=g(t,o)}return new v(i,t)}function _(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.i(r)<<1|t.i(r-1)>>>31;return new i(n,t.h)}function b(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],o=0;o<r;o++)s[o]=0<e?t.i(o+n)>>>e|t.i(o+n+1)<<32-e:t.i(o+n);return new i(s,t.h)}(t=i.prototype).m=function(){if(d(this))return-p(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.i(n);t+=(0<=r?r:4294967296+r)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(f(this))return"0";if(d(this))return"-"+p(this).toString(t);for(var e=a(Math.pow(t,6)),n=this,r="";;){var i=y(n,e).g,s=((0<(n=g(n,i.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(f(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return d(t=g(this,t))?-1:f(t)?0:1},t.abs=function(){return d(this)?p(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var o=r+(65535&this.i(s))+(65535&t.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(t.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(f(this)||f(t))return u;if(d(this))return d(t)?p(this).j(p(t)):p(p(this).j(t));if(d(t))return p(this.j(p(t)));if(0>this.l(h)&&0>t.l(h))return a(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var o=this.i(r)>>>16,c=65535&this.i(r),l=t.i(s)>>>16,g=65535&t.i(s);n[2*r+2*s]+=c*g,m(n,2*r+2*s),n[2*r+2*s+1]+=o*g,m(n,2*r+2*s+1),n[2*r+2*s+1]+=c*l,m(n,2*r+2*s+1),n[2*r+2*s+2]+=o*l,m(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new i(n,0)},t.A=function(t){return y(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)&t.i(r);return new i(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)|t.i(r);return new i(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)^t.i(r);return new i(n,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,c.Md5=e,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=a,i.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return p(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=u,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+o),n);8>o?(o=a(Math.pow(n,o)),i=i.j(o).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},r=c.Integer=i}).apply("undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var l,h,f,d,p,g,m,v,y,_="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},b={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof _&&_];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,r){if(r)t:{var i=n;t=t.split(".");for(var s=0;s<t.length-1;s++){var o=t[s];if(!(o in i))break t;i=i[o]}(r=r(s=i[t=t[t.length-1]]))!=s&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(t,e){return e}))}}));var r=r||{},i=this||self;function s(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function o(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t,e,n){return t.call.apply(t.bind,arguments)}function u(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function c(t,e,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:u).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function E(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function T(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function S(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(s(e)){const n=t.length||0,r=e.length||0;t.length=n+r;for(let i=0;i<r;i++)t[n+i]=e[i]}else t.push(e)}}function O(t){return/^[\s\xa0]*$/.test(t)}function C(){var t=i.navigator;return t&&(t=t.userAgent)?t:""}function I(t){return I[" "](t),t}I[" "]=function(){};var R=-1!=C().indexOf("Gecko")&&!(-1!=C().toLowerCase().indexOf("webkit")&&-1==C().indexOf("Edge"))&&!(-1!=C().indexOf("Trident")||-1!=C().indexOf("MSIE"))&&-1==C().indexOf("Edge");function k(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function N(t){const e={};for(const n in t)e[n]=t[n];return e}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let e=0;e<D.length;e++)n=D[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function P(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function L(t){i.setTimeout((()=>{throw t}),0)}function M(){var t=B;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var U=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new V),(t=>t.reset()));class V{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let j,F=!1,B=new class{constructor(){this.h=this.g=null}add(t,e){const n=U.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},$=()=>{const t=i.Promise.resolve(void 0);j=()=>{t.then(q)}};var q=()=>{for(var t;t=M();){try{t.h.call(t.g)}catch(n){L(n)}var e=U;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}F=!1};function K(){this.s=this.s,this.C=this.C}function H(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},H.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};i.addEventListener("test",t,e),i.removeEventListener("test",t,e)}catch(n){}return t}();function G(t,e){if(H.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(R){t:{try{I(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:W[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&G.aa.h.call(this)}}E(G,H);var W={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),X=0;function J(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++X,this.da=this.fa=!1}function Y(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Z(t){this.src=t,this.g={},this.h=0}function tt(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Array.prototype.indexOf.call(i,e,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Y(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function et(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.da&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}Z.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=et(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new J(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var nt="closure_lm_"+(1e6*Math.random()|0),rt={};function it(t,e,n,r,i){if(r&&r.once)return ot(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)it(t,e[s],n,r,i);return null}return n=dt(n),t&&t[Q]?t.K(e,n,o(r)?!!r.capture:!!r,i):st(t,e,n,!1,r,i)}function st(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,u=ht(t);if(u||(t[nt]=u=new Z(t)),(n=u.add(e,n,r,a,s)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}const e=lt;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)z||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ct(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ot(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ot(t,e[s],n,r,i);return null}return n=dt(n),t&&t[Q]?t.L(e,n,o(r)?!!r.capture:!!r,i):st(t,e,n,!0,r,i)}function at(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)at(t,e[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=dt(n),t&&t[Q]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=et(s=t.g[e],n,r,i))&&(Y(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=ht(t))&&(e=t.g[e.toString()],t=-1,e&&(t=et(e,n,r,i)),(n=-1<t?e[t]:null)&&ut(n))}function ut(t){if("number"!==typeof t&&t&&!t.da){var e=t.src;if(e&&e[Q])tt(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ct(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ht(e))?(tt(n,t),0==n.h&&(n.src=null,e[nt]=null)):Y(t)}}}function ct(t){return t in rt?rt[t]:rt[t]="on"+t}function lt(t,e){if(t.da)t=!0;else{e=new G(e,this);var n=t.listener,r=t.ha||t.src;t.fa&&ut(t),t=n.call(r,e)}return t}function ht(t){return(t=t[nt])instanceof Z?t:null}var ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function dt(t){return"function"===typeof t?t:(t[ft]||(t[ft]=function(e){return t.handleEvent(e)}),t[ft])}function pt(){K.call(this),this.i=new Z(this),this.M=this,this.F=null}function gt(t,e){var n,r=t.F;if(r)for(n=[];r;r=r.F)n.push(r);if(t=t.M,r=e.type||e,"string"===typeof e)e=new H(e,t);else if(e instanceof H)e.target=e.target||t;else{var i=e;x(e=new H(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=mt(o,r,!0,e)&&i}if(i=mt(o=e.g=t,r,!0,e)&&i,i=mt(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=mt(o=e.g=n[s],r,!1,e)&&i}function mt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.da&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.fa&&tt(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function vt(t,e,n){if("function"===typeof t)n&&(t=c(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=c(t.handleEvent,t)}return 2147483647<Number(e)?-1:i.setTimeout(t,e||0)}function yt(t){t.g=vt((()=>{t.g=null,t.i&&(t.i=!1,yt(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}E(pt,K),pt.prototype[Q]=!0,pt.prototype.removeEventListener=function(t,e,n,r){at(this,t,e,n,r)},pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Y(n[r]);delete e.g[t],e.h--}}this.F=null},pt.prototype.K=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},pt.prototype.L=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};class _t extends K{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:yt(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bt(t){K.call(this),this.h=t,this.g={}}E(bt,K);var wt=[];function Et(t){k(t.g,(function(t,e){this.g.hasOwnProperty(e)&&ut(t)}),t),t.g={}}bt.prototype.N=function(){bt.aa.N.call(this),Et(this)},bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=i.JSON.stringify,Tt=i.JSON.parse,St=class{stringify(t){return i.JSON.stringify(t,void 0)}parse(t){return i.JSON.parse(t,void 0)}};function Ot(){}function Ct(t){return t.h||(t.h=t.i())}function It(){}Ot.prototype.h=null;var Rt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kt(){H.call(this,"d")}function Nt(){H.call(this,"c")}E(kt,H),E(Nt,H);var Dt={},xt=null;function Pt(){return xt=xt||new pt}function Lt(t){H.call(this,Dt.La,t)}function Mt(t){const e=Pt();gt(e,new Lt(e))}function Ut(t,e){H.call(this,Dt.STAT_EVENT,t),this.stat=e}function Vt(t){const e=Pt();gt(e,new Ut(e,t))}function jt(t,e){H.call(this,Dt.Ma,t),this.size=e}function Ft(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){t()}),e)}function Bt(){this.g=!0}function $t(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return At(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Dt.La="serverreachability",E(Lt,H),Dt.STAT_EVENT="statevent",E(Ut,H),Dt.Ma="timingevent",E(jt,H),Bt.prototype.xa=function(){this.g=!1},Bt.prototype.info=function(){};var qt,Kt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ht={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function zt(){}function Gt(t,e,n,r){this.j=t,this.i=e,this.l=n,this.R=r||1,this.U=new bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wt}function Wt(){this.i=null,this.g="",this.h=!1}E(zt,Ot),zt.prototype.g=function(){return new XMLHttpRequest},zt.prototype.i=function(){return{}},qt=new zt;var Qt={},Xt={};function Jt(t,e,n){t.L=1,t.v=Ae(ye(e)),t.m=n,t.P=!0,Yt(t,null)}function Yt(t,e){t.F=Date.now(),ee(t),t.A=ye(t.v);var n=t.A,r=t.R;Array.isArray(r)||(r=[String(r)]),Ue(n.i,"t",r),t.C=0,n=t.j.J,t.h=new Wt,t.g=Sn(t.j,n?e:null,!t.m),0<t.O&&(t.M=new _t(c(t.Y,t,t.g),t.O)),e=t.U,n=t.g,r=t.ca;var i="readystatechange";Array.isArray(i)||(i&&(wt[0]=i.toString()),i=wt);for(var s=0;s<i.length;s++){var o=it(n,i[s],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?N(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Mt(),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.i,t.u,t.A,t.l,t.R,t.m)}function Zt(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.j.Ca)}function te(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Xt:(n=Number(e.substring(n,r)),isNaN(n)?Qt:(r+=1)+n>e.length?Xt:(e=e.slice(r,r+n),t.C=r+n,e))}function ee(t){t.S=Date.now()+t.I,ne(t,t.I)}function ne(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Ft(c(t.ba,t),e)}function re(t){t.B&&(i.clearTimeout(t.B),t.B=null)}function ie(t){0==t.j.G||t.J||bn(t.j,t)}function se(t){re(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,Et(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function oe(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||he(n.h,t)))if(!t.K&&he(n.h,t)&&3==n.G){try{var r=n.Da.g.parse(e)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;_n(n),cn(n)}mn(n),Vt(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ft(c(n.Za,n),6e3));if(1>=le(n.h)&&n.ca){try{n.ca()}catch(l){}n.ca=void 0}}else En(n,11)}else if((t.K||n.g==t)&&_n(n),!O(e))for(i=n.Da.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const e=c[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const l=c[5];null!=l&&"number"===typeof l&&0<l&&(r=1.5*l,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(fe(s,s.h),s.h=null))}if(r.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.ya=t,Ee(r.I,r.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=t;if((r=n).qa=Tn(r,r.J?r.ia:null,r.W),o.K){de(r.h,o);var a=o,u=r.L;u&&(a.I=u),a.B&&(re(a),ee(a)),r.g=o}else gn(r);0<n.i.length&&hn(n)}else"stop"!=c[0]&&"close"!=c[0]||En(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?En(n,7):un(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Mt()}catch(l){}}Gt.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==rn(t)?e.j():this.Y(t)},Gt.prototype.Y=function(t){try{if(t==this.g)t:{const f=rn(this.g);var e=this.g.Ba();this.g.Z();if(!(3>f)&&(3!=f||this.g&&(this.h.h||this.g.oa()||sn(this.g)))){this.J||4!=f||7==e||Mt(),re(this);var n=this.g.Z();this.X=n;e:if(Zt(this)){var r=sn(this.g);t="";var s=r.length,o=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){se(this),ie(this);var a="";break e}this.h.i=new i.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:!(o&&e==s-1)});r.length=0,this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,f,n),this.o){if(this.T&&!this.K){e:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(u)){var l=u;break e}}l=null}if(!(n=l)){this.o=!1,this.s=3,Vt(12),se(this),ie(this);break t}$t(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oe(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<a.length;){if(t=te(this,a),t==Xt){4==f&&(this.s=4,Vt(14),n=!1),$t(this.i,this.l,null,"[Incomplete Response]");break}if(t==Qt){this.s=4,Vt(15),$t(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}$t(this.i,this.l,t,null),oe(this,t)}if(Zt(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=f||0!=a.length||this.h.h||(this.s=1,Vt(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),vn(h),h.M=!0,Vt(11))}}else $t(this.i,this.l,a,"[Invalid Chunked Response]"),se(this),ie(this)}else $t(this.i,this.l,a,null),oe(this,a);4==f&&se(this),this.o&&!this.J&&(4==f?bn(this.j,this):(this.o=!1,ee(this)))}else(function(t){const e={};t=(t.g&&2<=rn(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(O(t[r]))continue;var n=P(t[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),se(this),ie(this)}}}catch(f){}},Gt.prototype.cancel=function(){this.J=!0,se(this)},Gt.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.i,this.A),2!=this.L&&(Mt(),Vt(17)),se(this),this.s=2,ie(this)):ne(this,this.S-t)};var ae=class{constructor(t,e){this.g=t,this.map=e}};function ue(t){this.l=t||10,i.PerformanceNavigationTiming?t=0<(t=i.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ce(t){return!!t.h||!!t.g&&t.g.size>=t.j}function le(t){return t.h?1:t.g?t.g.size:0}function he(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function fe(t,e){t.g?t.g.add(e):t.h=e}function de(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function pe(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return T(t.i)}function ge(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(s(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(s(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(s(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}ue.prototype.cancel=function(){if(this.i=pe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var me=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ve(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof ve){this.h=t.h,_e(this,t.j),this.o=t.o,this.g=t.g,be(this,t.s),this.l=t.l;var e=t.i,n=new xe;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),we(this,n),this.m=t.m}else t&&(e=String(t).match(me))?(this.h=!1,_e(this,e[1]||"",!0),this.o=Te(e[2]||""),this.g=Te(e[3]||"",!0),be(this,e[4]),this.l=Te(e[5]||"",!0),we(this,e[6]||"",!0),this.m=Te(e[7]||"")):(this.h=!1,this.i=new xe(null,this.h))}function ye(t){return new ve(t)}function _e(t,e,n){t.j=n?Te(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function be(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function we(t,e,n){e instanceof xe?(t.i=e,function(t,e){e&&!t.j&&(Pe(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Le(this,e),Ue(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=Se(e,Ne)),t.i=new xe(e,t.h))}function Ee(t,e,n){t.i.set(e,n)}function Ae(t){return Ee(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Te(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Se(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Oe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Oe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ve.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Se(e,Ie,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(Se(e,Ie,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Se(n,"/"==n.charAt(0)?ke:Re,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",Se(n,De)),t.join("")};var Ce,Ie=/[#\/\?@]/g,Re=/[#\?:]/g,ke=/[#\?]/g,Ne=/[#\?@]/g,De=/#/g;function xe(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Pe(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Le(t,e){Pe(t),e=Ve(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Me(t,e){return Pe(t),e=Ve(t,e),t.g.has(e)}function Ue(t,e,n){Le(t,e),0<n.length&&(t.i=null,t.g.set(Ve(t,e),T(n)),t.h+=n.length)}function Ve(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function je(t,e,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Fe(){this.g=new St}function Be(t,e,n){const r=n||"";try{ge(t,(function(t,n){let i=t;o(t)&&(i=At(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function $e(t){this.l=t.Ub||null,this.j=t.eb||!1}function qe(t,e){pt.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ke(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function He(t){t.readyState=4,t.l=null,t.j=null,t.v=null,ze(t)}function ze(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ge(t){let e="";return k(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function We(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Ge(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Ee(t,e,n))}function Qe(t){pt.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=xe.prototype).add=function(t,e){Pe(this),this.i=null,t=Ve(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){Pe(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},t.na=function(){Pe(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},t.V=function(t){Pe(this);let e=[];if("string"===typeof t)Me(this,t)&&(e=e.concat(this.g.get(Ve(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return Pe(this),this.i=null,Me(this,t=Ve(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")},E($e,Ot),$e.prototype.g=function(){return new qe(this.l,this.j)},$e.prototype.i=(Ce={},function(){return Ce}),E(qe,pt),(t=qe.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,ze(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||i).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,He(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ze(this)),this.g&&(this.readyState=3,ze(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ke(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?He(this):ze(this),3==this.readyState&&Ke(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,He(this))},t.Qa=function(t){this.g&&(this.response=t,He(this))},t.ga=function(){this.g&&He(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(qe.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),E(Qe,pt);var Xe=/^https?$/i,Je=["POST","PUT"];function Ye(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,Ze(t),en(t)}function Ze(t){t.A||(t.A=!0,gt(t,"complete"),gt(t,"error"))}function tn(t){if(t.h&&"undefined"!=typeof r&&(!t.v[1]||4!=rn(t)||2!=t.Z()))if(t.u&&4==rn(t))vt(t.Ea,0,t);else if(gt(t,"readystatechange"),4==rn(t)){t.h=!1;try{const r=t.Z();t:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===r){var o=String(t.D).match(me)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Xe.test(o?o.toLowerCase():"")}n=s}if(n)gt(t,"complete"),gt(t,"success");else{t.m=6;try{var a=2<rn(t)?t.g.statusText:""}catch(u){a=""}t.l=a+" ["+t.Z()+"]",Ze(t)}}finally{en(t)}}}function en(t,e){if(t.g){nn(t);const r=t.g,i=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||gt(t,"ready");try{r.onreadystatechange=i}catch(n){}}}function nn(t){t.I&&(i.clearTimeout(t.I),t.I=null)}function rn(t){return t.g?t.g.readyState:0}function sn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(A){return null}}function on(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function an(t){this.Aa=0,this.i=[],this.j=new Bt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=on("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=on("baseRetryDelayMs",5e3,t),this.cb=on("retryDelaySeedMs",1e4,t),this.Wa=on("forwardChannelMaxRetries",2,t),this.wa=on("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new ue(t&&t.concurrentRequestLimit),this.Da=new Fe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function un(t){if(ln(t),3==t.G){var e=t.U++,n=ye(t.I);if(Ee(n,"SID",t.K),Ee(n,"RID",e),Ee(n,"TYPE","terminate"),dn(t,n),(e=new Gt(t,t.j,e)).L=2,e.v=Ae(ye(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(e.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=e.v,n=!0),n||(e.g=Sn(e.j,null),e.g.ea(e.v)),e.F=Date.now(),ee(e)}An(t)}function cn(t){t.g&&(vn(t),t.g.cancel(),t.g=null)}function ln(t){cn(t),t.u&&(i.clearTimeout(t.u),t.u=null),_n(t),t.h.cancel(),t.s&&("number"===typeof t.s&&i.clearTimeout(t.s),t.s=null)}function hn(t){if(!ce(t.h)&&!t.s){t.s=!0;var e=t.Ga;j||$(),F||(j(),F=!0),B.add(e,t),t.B=0}}function fn(t,e){var n;n=e?e.l:t.U++;const r=ye(t.I);Ee(r,"SID",t.K),Ee(r,"RID",n),Ee(r,"AID",t.T),dn(t,r),t.m&&t.o&&We(r,t.m,t.o),n=new Gt(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=pn(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),fe(t.h,n),Jt(n,r,e)}function dn(t,e){t.H&&k(t.H,(function(t,n){Ee(e,n,t)})),t.l&&ge({},(function(t,n){Ee(e,n,t)}))}function pn(t,e,n){n=Math.min(t.i.length,n);var r=t.l?c(t.l.Na,t.l,t):null;t:{var i=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const u=i[a].map;if(n-=e,0>n)e=Math.max(0,i[a].g-100),o=!1;else try{Be(u,t,"req"+n+"_")}catch(s){r&&r(u)}}if(o){r=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,r}function gn(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;j||$(),F||(j(),F=!0),B.add(e,t),t.v=0}}function mn(t){return!(t.g||t.u||3<=t.v)&&(t.Y++,t.u=Ft(c(t.Fa,t),wn(t,t.v)),t.v++,!0)}function vn(t){null!=t.A&&(i.clearTimeout(t.A),t.A=null)}function yn(t){t.g=new Gt(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=ye(t.qa);Ee(e,"RID","rpc"),Ee(e,"SID",t.K),Ee(e,"AID",t.T),Ee(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&Ee(e,"TO",t.ja),Ee(e,"TYPE","xmlhttp"),dn(t,e),t.m&&t.o&&We(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=Ae(ye(e)),n.m=null,n.P=!0,Yt(n,t)}function _n(t){null!=t.C&&(i.clearTimeout(t.C),t.C=null)}function bn(t,e){var n=null;if(t.g==e){_n(t),vn(t),t.g=null;var r=2}else{if(!he(t.h,e))return;n=e.D,de(t.h,e),r=1}if(0!=t.G)if(e.o)if(1==r){n=e.m?e.m.length:0,e=Date.now()-e.F;var i=t.B;gt(r=Pt(),new jt(r,n)),hn(t)}else gn(t);else if(3==(i=e.s)||0==i&&0<e.X||!(1==r&&function(t,e){return!(le(t.h)>=t.h.j-(t.s?1:0))&&(t.s?(t.i=e.D.concat(t.i),!0):!(1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa))&&(t.s=Ft(c(t.Ga,t,e),wn(t,t.B)),t.B++,!0))}(t,e)||2==r&&mn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:En(t,5);break;case 4:En(t,10);break;case 3:En(t,6);break;default:En(t,2)}}function wn(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function En(t,e){if(t.j.info("Error code "+e),2==e){var n=c(t.fb,t),r=t.Xa;const e=!r;r=new ve(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||_e(r,"https"),Ae(r),e?function(t,e){const n=new Bt;if(i.Image){const r=new Image;r.onload=w(je,n,"TestLoadImage: loaded",!0,e,r),r.onerror=w(je,n,"TestLoadImage: error",!1,e,r),r.onabort=w(je,n,"TestLoadImage: abort",!1,e,r),r.ontimeout=w(je,n,"TestLoadImage: timeout",!1,e,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(r.toString(),n):function(t,e){new Bt;const n=new AbortController,r=setTimeout((()=>{n.abort(),je(0,0,!1,e)}),1e4);fetch(t,{signal:n.signal}).then((t=>{clearTimeout(r),t.ok?je(0,0,!0,e):je(0,0,!1,e)})).catch((()=>{clearTimeout(r),je(0,0,!1,e)}))}(r.toString(),n)}else Vt(2);t.G=0,t.l&&t.l.sa(e),An(t),ln(t)}function An(t){if(t.G=0,t.ka=[],t.l){const e=pe(t.h);0==e.length&&0==t.i.length||(S(t.ka,e),S(t.ka,t.i),t.h.i.length=0,T(t.i),t.i.length=0),t.l.ra()}}function Tn(t,e,n){var r=n instanceof ve?ye(n):new ve(n);if(""!=r.g)e&&(r.g=e+"."+r.g),be(r,r.s);else{var s=i.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new ve(null);r&&_e(o,r),e&&(o.g=e),s&&be(o,s),n&&(o.l=n),r=o}return n=t.D,e=t.ya,n&&e&&Ee(r,n,e),Ee(r,"VER",t.la),dn(t,r),r}function Sn(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new Qe(new $e({eb:n})):new Qe(t.pa)).Ha(t.J),e}function On(){}function Cn(){}function In(t,e){pt.call(this),this.g=new an(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!O(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!O(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Nn(this)}function Rn(t){kt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function kn(){Nt.call(this),this.status=1}function Nn(t){this.g=t}(t=Qe.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qt.g(),this.v=this.o?Ct(this.o):Ct(qt),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(o){return void Ye(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),s=i.FormData&&t instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Je,e,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(t),this.u=!1}catch(o){Ye(this,o)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,gt(this,"complete"),gt(this,"abort"),en(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),en(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tn(this):this.bb())},t.bb=function(){tn(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(Ce){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(Ce){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Tt(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(t=an.prototype).la=8,t.G=1,t.connect=function(t,e,n,r){Vt(0),this.W=t,this.H=e||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Tn(this,null,this.W),hn(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new Gt(this,this.j,t);let s=this.o;if(this.S&&(s?(s=N(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=pn(this,i,e),Ee(n=ye(this.I),"RID",t),Ee(n,"CVER",22),this.D&&Ee(n,"X-HTTP-Session-Id",this.D),dn(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Ge(s)))+"&"+e:this.m&&We(n,this.m,s)),fe(this.h,i),this.Ua&&Ee(n,"TYPE","init"),this.P?(Ee(n,"$req",e),Ee(n,"SID","null"),i.T=!0,Jt(i,n,null)):Jt(i,n,e),this.G=2}}else 3==this.G&&(t?fn(this,t):0==this.i.length||ce(this.h)||fn(this))},t.Fa=function(){if(this.u=null,yn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=Ft(c(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),cn(this),yn(this))},t.Za=function(){null!=this.C&&(this.C=null,cn(this),mn(this),Vt(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=On.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},Cn.prototype.g=function(t,e){return new In(t,e)},E(In,pt),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){un(this.g)},In.prototype.o=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=At(t),t=n);e.i.push(new ae(e.Ya++,t)),3==e.G&&hn(e)},In.prototype.N=function(){this.g.l=null,delete this.j,un(this.g),delete this.g,In.aa.N.call(this)},E(Rn,kt),E(kn,Nt),E(Nn,On),Nn.prototype.ua=function(){gt(this.g,"a")},Nn.prototype.ta=function(t){gt(this.g,new Rn(t))},Nn.prototype.sa=function(t){gt(this.g,new kn)},Nn.prototype.ra=function(){gt(this.g,"b")},Cn.prototype.createWebChannel=Cn.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,y=b.createWebChannelTransport=function(){return new Cn},v=b.getStatEventTarget=function(){return Pt()},m=b.Event=Dt,g=b.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Kt.NO_ERROR=0,Kt.TIMEOUT=8,Kt.HTTP_ERROR=6,p=b.ErrorCode=Kt,Ht.COMPLETE="complete",d=b.EventType=Ht,It.EventType=Rt,Rt.OPEN="a",Rt.CLOSE="b",Rt.ERROR="c",Rt.MESSAGE="d",pt.prototype.listen=pt.prototype.K,f=b.WebChannel=It,h=b.FetchXmlHttpFactory=$e,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,l=b.XhrIo=Qe}).apply("undefined"!==typeof _?_:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const w="@firebase/firestore";class E{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}E.UNAUTHENTICATED=new E(null),E.GOOGLE_CREDENTIALS=new E("google-credentials-uid"),E.FIRST_PARTY=new E("first-party-uid"),E.MOCK_USER=new E("mock-user");let A="10.12.5";const T=new o.Vy("@firebase/firestore");function S(){return T.logLevel}function O(t){if(T.logLevel<=o.$b.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(R);T.debug(`Firestore (${A}): ${t}`,...i)}}function C(t){if(T.logLevel<=o.$b.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(R);T.error(`Firestore (${A}): ${t}`,...i)}}function I(t){if(T.logLevel<=o.$b.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(R);T.warn(`Firestore (${A}): ${t}`,...i)}}function R(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function k(){const t=`FIRESTORE (${A}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw C(t),new Error(t)}function N(t,e){t||k()}function D(t,e){return t}const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class P extends a.g{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class L{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class M{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class U{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(E.UNAUTHENTICATED)))}shutdown(){}}class V{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class j{constructor(t){this.t=t,this.currentUser=E.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new L;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new L,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new L)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(N("string"==typeof e.accessToken),new M(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return N(null===t||"string"==typeof t),new E(t)}}class F{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=E.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class B{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new F(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(E.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ${constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,O("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?r(t):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(N("string"==typeof t.token),this.R=t.token,new $(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function K(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class H{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=K(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%62))}return n}}function z(t,e){return t<e?-1:t>e?1:0}function G(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class W{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return W.fromMillis(Date.now())}static fromDate(t){return W.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new W(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?z(this.nanoseconds,t.nanoseconds):z(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Q{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Q(t)}static min(){return new Q(new W(0,0))}static max(){return new Q(new W(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class X{constructor(t,e,n){void 0===e?e=0:e>t.length&&k(),void 0===n?n=t.length-e:n>t.length-e&&k(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===X.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof X?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class J extends X{construct(t,e,n){return new J(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((t=>t.length>0)))}return new J(t)}static emptyPath(){return new J([])}}const Y=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Z extends X{construct(t,e,n){return new Z(t,e,n)}static isValidIdentifier(t){return Y.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Z.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Z(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Z(e)}static emptyPath(){return new Z([])}}class tt{constructor(t){this.path=t}static fromPath(t){return new tt(J.fromString(t))}static fromName(t){return new tt(J.fromString(t).popFirst(5))}static empty(){return new tt(J.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===J.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return J.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new tt(new J(t.slice()))}}class et{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}}et.UNKNOWN_ID=-1;function nt(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(1e9===r?new W(n+1,0):new W(n,r));return new it(i,tt.empty(),e)}function rt(t){return new it(t.readTime,t.key,-1)}class it{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new it(Q.min(),tt.empty(),-1)}static max(){return new it(Q.max(),tt.empty(),-1)}}function st(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=tt.comparator(t.documentKey,e.documentKey),0!==n?n:z(t.largestBatchId,e.largestBatchId))}const ot="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class at{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function ut(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==ot)throw t;O("LocalStore","Unexpectedly lost primary lease")}class ct{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&k(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ct(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof ct?e:ct.resolve(e)}catch(t){return ct.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):ct.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):ct.reject(e)}static resolve(t){return new ct(((e,n)=>{e(t)}))}static reject(t){return new ct(((e,n)=>{n(t)}))}static waitFor(t){return new ct(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=ct.resolve(!1);for(const n of t)e=e.next((t=>t?ct.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new ct(((n,r)=>{const i=t.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const u=a;e(t[u]).next((t=>{s[u]=t,++o,o===i&&n(s)}),(t=>r(t)))}}))}static doWhile(t,e){return new ct(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}function lt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ht(t){return"IndexedDbTransactionError"===t.name}class ft{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ie(t),this.se=t=>e.writeSequenceNumber(t))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}function dt(t){return null==t}function pt(t){return 0===t&&1/t==-1/0}function gt(t){return"number"==typeof t&&Number.isInteger(t)&&!pt(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}ft.oe=-1;const mt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yt=vt,_t=[...yt,"indexConfiguration","indexState","indexEntries"];function bt(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wt(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Et(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class At{constructor(t,e){this.comparator=t,this.root=e||St.EMPTY}insert(t,e){return new At(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,St.BLACK,null,null))}remove(t){return new At(this.comparator,this.root.remove(t,this.comparator).copy(null,null,St.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Tt(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Tt(this.root,t,this.comparator,!1)}getReverseIterator(){return new Tt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Tt(this.root,t,this.comparator,!0)}}class Tt{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class St{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:St.RED,this.left=null!=r?r:St.EMPTY,this.right=null!=i?i:St.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new St(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return St.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw k();if(this.right.isRed())throw k();const t=this.left.check();if(t!==this.right.check())throw k();return t+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1,St.EMPTY=new class{constructor(){this.size=0}get key(){throw k()}get value(){throw k()}get color(){throw k()}get left(){throw k()}get right(){throw k()}copy(t,e,n,r,i){return this}insert(t,e,n){return new St(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ot{constructor(t){this.comparator=t,this.data=new At(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Ct(this.data.getIterator())}getIteratorFrom(t){return new Ct(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Ot))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ot(this.comparator);return e.data=t,e}}class Ct{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class It{constructor(t){this.fields=t,t.sort(Z.comparator)}static empty(){return new It([])}unionWith(t){let e=new Ot(Z.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new It(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return G(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Rt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kt{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Rt("Invalid base64 string: "+t):t}}(t);return new kt(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new kt(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return z(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const Nt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dt(t){if(N(!!t),"string"==typeof t){let e=0;const n=Nt.exec(t);if(N(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(t.seconds),nanos:xt(t.nanos)}}function xt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Pt(t){return"string"==typeof t?kt.fromBase64String(t):kt.fromUint8Array(t)}function Lt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Mt(t){const e=t.mapValue.fields.__previous_value__;return Lt(e)?Mt(e):e}function Ut(t){const e=Dt(t.mapValue.fields.__local_write_time__.timestampValue);return new W(e.seconds,e.nanos)}class Vt{constructor(t,e,n,r,i,s,o,a,u){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=u}}class jt{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new jt("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof jt&&t.projectId===this.projectId&&t.database===this.database}}const Ft={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lt(t)?4:Yt(t)?9007199254740991:10:k()}function $t(t,e){if(t===e)return!0;const n=Bt(t);if(n!==Bt(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ut(t).isEqual(Ut(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Dt(t.timestampValue),r=Dt(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Pt(t.bytesValue).isEqual(Pt(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return xt(t.geoPointValue.latitude)===xt(e.geoPointValue.latitude)&&xt(t.geoPointValue.longitude)===xt(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return xt(t.integerValue)===xt(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=xt(t.doubleValue),r=xt(e.doubleValue);return n===r?pt(n)===pt(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return G(t.arrayValue.values||[],e.arrayValue.values||[],$t);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(bt(n)!==bt(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!$t(n[i],r[i])))return!1;return!0}(t,e);default:return k()}}function qt(t,e){return void 0!==(t.values||[]).find((t=>$t(t,e)))}function Kt(t,e){if(t===e)return 0;const n=Bt(t),r=Bt(e);if(n!==r)return z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return z(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=xt(t.integerValue||t.doubleValue),r=xt(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ht(t.timestampValue,e.timestampValue);case 4:return Ht(Ut(t),Ut(e));case 5:return z(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Pt(t),r=Pt(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let i=0;i<n.length&&i<r.length;i++){const t=z(n[i],r[i]);if(0!==t)return t}return z(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=z(xt(t.latitude),xt(e.latitude));return 0!==n?n:z(xt(t.longitude),xt(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const t=Kt(n[i],r[i]);if(t)return t}return z(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Ft.mapValue&&e===Ft.mapValue)return 0;if(t===Ft.mapValue)return 1;if(e===Ft.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const t=z(r[o],s[o]);if(0!==t)return t;const e=Kt(n[r[o]],i[s[o]]);if(0!==e)return e}return z(r.length,s.length)}(t.mapValue,e.mapValue);default:throw k()}}function Ht(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return z(t,e);const n=Dt(t),r=Dt(e),i=z(n.seconds,r.seconds);return 0!==i?i:z(n.nanos,r.nanos)}function zt(t){return Gt(t)}function Gt(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Dt(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Pt(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return tt.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=Gt(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${Gt(t.fields[i])}`;return n+"}"}(t.mapValue):k()}function Wt(t){return!!t&&"integerValue"in t}function Qt(t){return!!t&&"arrayValue"in t}function Xt(t){return!!t&&"mapValue"in t}function Jt(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return wt(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Jt(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jt(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Yt(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Zt{constructor(t){this.value=t}static empty(){return new Zt({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Xt(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Jt(e)}setAll(t){let e=Z.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=Jt(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());Xt(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return $t(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Xt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){wt(e,((e,n)=>t[e]=n));for(const r of n)delete t[r]}clone(){return new Zt(Jt(this.value))}}function te(t){const e=[];return wt(t.fields,((t,n)=>{const r=new Z([t]);if(Xt(n)){const t=te(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new It(e)}class ee{constructor(t,e,n,r,i,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new ee(t,0,Q.min(),Q.min(),Q.min(),Zt.empty(),0)}static newFoundDocument(t,e,n,r){return new ee(t,1,e,Q.min(),n,r,0)}static newNoDocument(t,e){return new ee(t,2,e,Q.min(),Q.min(),Zt.empty(),0)}static newUnknownDocument(t,e){return new ee(t,3,e,Q.min(),Q.min(),Zt.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Q.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ee&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ee(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ne{constructor(t,e){this.position=t,this.inclusive=e}}function re(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?tt.comparator(tt.fromName(o.referenceValue),n.key):Kt(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ie(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$t(t.position[n],e.position[n]))return!1;return!0}class se{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function oe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class ae{}class ue extends ae{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new me(t,e,n):"array-contains"===e?new be(t,n):"in"===e?new we(t,n):"not-in"===e?new Ee(t,n):"array-contains-any"===e?new Ae(t,n):new ue(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new ve(t,n):new ye(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Kt(e,this.value)):null!==e&&Bt(this.value)===Bt(e)&&this.matchesComparison(Kt(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return k()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ce extends ae{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new ce(t,e)}matches(t){return le(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function le(t){return"and"===t.op}function he(t){return fe(t)&&le(t)}function fe(t){for(const e of t.filters)if(e instanceof ce)return!1;return!0}function de(t){if(t instanceof ue)return t.field.canonicalString()+t.op.toString()+zt(t.value);if(he(t))return t.filters.map((t=>de(t))).join(",");{const e=t.filters.map((t=>de(t))).join(",");return`${t.op}(${e})`}}function pe(t,e){return t instanceof ue?function(t,e){return e instanceof ue&&t.op===e.op&&t.field.isEqual(e.field)&&$t(t.value,e.value)}(t,e):t instanceof ce?function(t,e){return e instanceof ce&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&pe(n,e.filters[r])),!0)}(t,e):void k()}function ge(t){return t instanceof ue?function(t){return`${t.field.canonicalString()} ${t.op} ${zt(t.value)}`}(t):t instanceof ce?function(t){return t.op.toString()+" {"+t.getFilters().map(ge).join(" ,")+"}"}(t):"Filter"}class me extends ue{constructor(t,e,n){super(t,e,n),this.key=tt.fromName(n.referenceValue)}matches(t){const e=tt.comparator(t.key,this.key);return this.matchesComparison(e)}}class ve extends ue{constructor(t,e){super(t,"in",e),this.keys=_e("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class ye extends ue{constructor(t,e){super(t,"not-in",e),this.keys=_e("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function _e(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>tt.fromName(t.referenceValue)))}class be extends ue{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Qt(e)&&qt(e.arrayValue,this.value)}}class we extends ue{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&qt(this.value.arrayValue,e)}}class Ee extends ue{constructor(t,e){super(t,"not-in",e)}matches(t){if(qt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!qt(this.value.arrayValue,e)}}class Ae extends ue{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Qt(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>qt(this.value.arrayValue,t)))}}class Te{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Se(t){return new Te(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Oe(t){const e=D(t);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>de(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),dt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>zt(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>zt(t))).join(",")),e.ue=t}return e.ue}function Ce(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pe(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ie(t.startAt,e.startAt)&&ie(t.endAt,e.endAt)}class Ie{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Re(t,e,n,r,i,s,o,a){return new Ie(t,e,n,r,i,s,o,a)}function ke(t){return new Ie(t)}function Ne(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function De(t){return null!==t.collectionGroup}function xe(t){const e=D(t);if(null===e.ce){e.ce=[];const t=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",r=function(t){let e=new Ot(Z.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);r.forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.ce.push(new se(r,n))})),t.has(Z.keyField().canonicalString())||e.ce.push(new se(Z.keyField(),n))}return e.ce}function Pe(t){const e=D(t);return e.le||(e.le=Le(e,xe(t))),e.le}function Le(t,e){if("F"===t.limitType)return Se(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new se(t.field,e)}));const n=t.endAt?new ne(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ne(t.startAt.position,t.startAt.inclusive):null;return Se(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Me(t,e,n){return new Ie(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ue(t,e){return Ce(Pe(t),Pe(e))&&t.limitType===e.limitType}function Ve(t){return`${Oe(Pe(t))}|lt:${t.limitType}`}function je(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>ge(t))).join(", ")}]`),dt(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>zt(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>zt(t))).join(",")),`Target(${e})`}(Pe(t))}; limitType=${t.limitType})`}function Fe(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):tt.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of xe(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=re(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,xe(t),e))&&!(t.endAt&&!function(t,e,n){const r=re(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,xe(t),e))}(t,e)}function Be(t){return(e,n)=>{let r=!1;for(const i of xe(t)){const t=$e(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function $e(t,e,n){const r=t.field.isKeyField()?tt.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Kt(r,i):k()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return k()}}class qe{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){wt(this.inner,((e,n)=>{for(const[r,i]of n)t(r,i)}))}isEmpty(){return Et(this.inner)}size(){return this.innerSize}}const Ke=new At(tt.comparator);function He(){return Ke}const ze=new At(tt.comparator);function Ge(){let t=ze;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n)t=t.insert(i.key,i);return t}function We(t){let e=ze;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Qe(){return Je()}function Xe(){return Je()}function Je(){return new qe((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Ye=new At(tt.comparator),Ze=new Ot(tt.comparator);function tn(){let t=Ze;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n)t=t.add(i);return t}const en=new Ot(z);function nn(){return en}function rn(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pt(e)?"-0":e}}function sn(t){return{integerValue:""+t}}function on(t,e){return gt(e)?sn(e):rn(t,e)}class an{constructor(){this._=void 0}}function un(t,e,n){return t instanceof hn?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Lt(e)&&(e=Mt(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof fn?dn(t,e):t instanceof pn?gn(t,e):function(t,e){const n=ln(t,e),r=vn(n)+vn(t.Pe);return Wt(n)&&Wt(t.Pe)?sn(r):rn(t.serializer,r)}(t,e)}function cn(t,e,n){return t instanceof fn?dn(t,e):t instanceof pn?gn(t,e):n}function ln(t,e){return t instanceof mn?function(t){return Wt(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class hn extends an{}class fn extends an{constructor(t){super(),this.elements=t}}function dn(t,e){const n=yn(e);for(const r of t.elements)n.some((t=>$t(t,r)))||n.push(r);return{arrayValue:{values:n}}}class pn extends an{constructor(t){super(),this.elements=t}}function gn(t,e){let n=yn(e);for(const r of t.elements)n=n.filter((t=>!$t(t,r)));return{arrayValue:{values:n}}}class mn extends an{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function vn(t){return xt(t.integerValue||t.doubleValue)}function yn(t){return Qt(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class _n{constructor(t,e){this.version=t,this.transformResults=e}}class bn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new bn}static exists(t){return new bn(void 0,t)}static updateTime(t){return new bn(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function wn(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class En{}function An(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new xn(t.key,bn.none()):new In(t.key,t.data,bn.none());{const n=t.data,r=Zt.empty();let i=new Ot(Z.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new Rn(t.key,r,new It(i.toArray()),bn.none())}}function Tn(t,e,n){t instanceof In?function(t,e,n){const r=t.value.clone(),i=Nn(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Rn?function(t,e,n){if(!wn(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Nn(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(kn(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Sn(t,e,n,r){return t instanceof In?function(t,e,n,r){if(!wn(t.precondition,e))return n;const i=t.value.clone(),s=Dn(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rn?function(t,e,n,r){if(!wn(t.precondition,e))return n;const i=Dn(t.fieldTransforms,r,e),s=e.data;return s.setAll(kn(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return wn(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function On(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=ln(r.transform,t||null);null!=i&&(null===n&&(n=Zt.empty()),n.set(r.field,i))}return n||null}function Cn(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&G(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof fn&&e instanceof fn||t instanceof pn&&e instanceof pn?G(t.elements,e.elements,$t):t instanceof mn&&e instanceof mn?$t(t.Pe,e.Pe):t instanceof hn&&e instanceof hn}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class In extends En{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Rn extends En{constructor(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kn(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Nn(t,e,n){const r=new Map;N(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,cn(o,a,n[i]))}return r}function Dn(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,un(t,s,e))}return r}class xn extends En{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pn extends En{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ln{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const e=this.mutations[r];e.key.isEqual(t.key)&&Tn(e,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Sn(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Sn(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Xe();return this.mutations.forEach((r=>{const i=t.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=e.has(r.key)?null:o;const a=An(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Q.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),tn())}isEqual(t){return this.batchId===t.batchId&&G(this.mutations,t.mutations,((t,e)=>Cn(t,e)))&&G(this.baseMutations,t.baseMutations,((t,e)=>Cn(t,e)))}}class Mn{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){N(t.mutations.length===n.length);let r=Ye;const i=t.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Mn(t,e,n,r)}}class Un{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var Vn,jn;function Fn(t){switch(t){default:return k();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function Bn(t){if(void 0===t)return C("GRPC error has no .code"),x.UNKNOWN;switch(t){case Vn.OK:return x.OK;case Vn.CANCELLED:return x.CANCELLED;case Vn.UNKNOWN:return x.UNKNOWN;case Vn.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Vn.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Vn.INTERNAL:return x.INTERNAL;case Vn.UNAVAILABLE:return x.UNAVAILABLE;case Vn.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Vn.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Vn.NOT_FOUND:return x.NOT_FOUND;case Vn.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Vn.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Vn.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Vn.ABORTED:return x.ABORTED;case Vn.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Vn.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Vn.DATA_LOSS:return x.DATA_LOSS;default:return k()}}(jn=Vn||(Vn={}))[jn.OK=0]="OK",jn[jn.CANCELLED=1]="CANCELLED",jn[jn.UNKNOWN=2]="UNKNOWN",jn[jn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jn[jn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jn[jn.NOT_FOUND=5]="NOT_FOUND",jn[jn.ALREADY_EXISTS=6]="ALREADY_EXISTS",jn[jn.PERMISSION_DENIED=7]="PERMISSION_DENIED",jn[jn.UNAUTHENTICATED=16]="UNAUTHENTICATED",jn[jn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jn[jn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jn[jn.ABORTED=10]="ABORTED",jn[jn.OUT_OF_RANGE=11]="OUT_OF_RANGE",jn[jn.UNIMPLEMENTED=12]="UNIMPLEMENTED",jn[jn.INTERNAL=13]="INTERNAL",jn[jn.UNAVAILABLE=14]="UNAVAILABLE",jn[jn.DATA_LOSS=15]="DATA_LOSS";new r([4294967295,4294967295],0);Error;class $n{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function qn(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kn(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Hn(t,e){return qn(t,e.toTimestamp())}function zn(t){return N(!!t),Q.fromTimestamp(function(t){const e=Dt(t);return new W(e.seconds,e.nanos)}(t))}function Gn(t,e){return Wn(t,e).canonicalString()}function Wn(t,e){const n=function(t){return new J(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Qn(t){const e=J.fromString(t);return N(or(e)),e}function Xn(t,e){return Gn(t.databaseId,e.path)}function Jn(t){const e=Qn(t);return 4===e.length?J.emptyPath():Zn(e)}function Yn(t){return new J(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Zn(t){return N(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function tr(t,e,n){return{name:Xn(t,e),fields:n.value.mapValue.fields}}function er(t,e){let n;if(e instanceof In)n={update:tr(t,e.key,e.value)};else if(e instanceof xn)n={delete:Xn(t,e.key)};else if(e instanceof Rn)n={update:tr(t,e.key,e.data),updateMask:sr(e.fieldMask)};else{if(!(e instanceof Pn))return k();n={verify:Xn(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof hn)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fn)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof pn)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof mn)return{fieldPath:e.field.canonicalString(),increment:n.Pe};throw k()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Hn(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:k()}(t,e.precondition)),n}function nr(t){let e=Jn(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){N(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=rr(t);return e instanceof ce&&he(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new se(ir(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,dt(e)?null:e}(n.limit));let u=null;n.startAt&&(u=function(t){const e=!!t.before,n=t.values||[];return new ne(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new ne(n,e)}(n.endAt)),Re(e,i,o,s,a,"F",u,c)}function rr(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=ir(t.unaryFilter.field);return ue.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=ir(t.unaryFilter.field);return ue.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ir(t.unaryFilter.field);return ue.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ir(t.unaryFilter.field);return ue.create(i,"!=",{nullValue:"NULL_VALUE"});default:return k()}}(t):void 0!==t.fieldFilter?function(t){return ue.create(ir(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return k()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return ce.create(t.compositeFilter.filters.map((t=>rr(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return k()}}(t.compositeFilter.op))}(t):k()}function ir(t){return Z.fromServerFormat(t.fieldPath)}function sr(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function or(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class ar{constructor(t){this.ct=t}}function ur(t){const e=nr({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Me(e,e.limit,"L"):e}class cr{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(xt(t.integerValue));else if("doubleValue"in t){const n=xt(t.doubleValue);isNaN(n)?this.dt(e,13):(this.dt(e,15),pt(n)?e.At(0):e.At(n))}else if("timestampValue"in t){let n=t.timestampValue;this.dt(e,20),"string"==typeof n&&(n=Dt(n)),e.Rt(`${n.seconds||""}`),e.At(n.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(Pt(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.dt(e,45),e.At(n.latitude||0),e.At(n.longitude||0)}else"mapValue"in t?Yt(t)?this.dt(e,Number.MAX_SAFE_INTEGER):(this.wt(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.St(t.arrayValue,e),this.ft(e)):k()}Vt(t,e){this.dt(e,25),this.bt(t,e)}bt(t,e){e.Rt(t)}wt(t,e){const n=t.fields||{};this.dt(e,55);for(const r of Object.keys(n))this.Vt(r,e),this.Tt(n[r],e)}St(t,e){const n=t.values||[];this.dt(e,50);for(const r of n)this.Tt(r,e)}yt(t,e){this.dt(e,37),tt.fromName(t).path.forEach((t=>{this.dt(e,60),this.bt(t,e)}))}dt(t,e){t.At(e)}ft(t){t.At(2)}}cr.Dt=new cr;class lr{constructor(){this.an=new hr}addToCollectionParentIndex(t,e){return this.an.add(e),ct.resolve()}getCollectionParents(t,e){return ct.resolve(this.an.getEntries(e))}addFieldIndex(t,e){return ct.resolve()}deleteFieldIndex(t,e){return ct.resolve()}deleteAllFieldIndexes(t){return ct.resolve()}createTargetIndexes(t,e){return ct.resolve()}getDocumentsMatchingTarget(t,e){return ct.resolve(null)}getIndexType(t,e){return ct.resolve(0)}getFieldIndexes(t,e){return ct.resolve([])}getNextCollectionGroupToUpdate(t){return ct.resolve(null)}getMinOffset(t,e){return ct.resolve(it.min())}getMinOffsetFromCollectionGroup(t,e){return ct.resolve(it.min())}updateCollectionGroup(t,e,n){return ct.resolve()}updateIndexEntries(t,e){return ct.resolve()}}class hr{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ot(J.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new Ot(J.comparator)).toArray()}}new Uint8Array(0);class fr{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new fr(t,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(41943040,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);class dr{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static Ln(){return new dr(0)}static Bn(){return new dr(-1)}}class pr{constructor(){this.changes=new qe((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ee.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?ct.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class gr{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class mr{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Sn(n.mutation,t,It.empty(),W.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,tn()).next((()=>e))))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tn();const r=Qe();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=Ge();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Qe();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,tn())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=He();const s=Je(),o=Je();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof Rn)?i=i.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Sn(o.mutation,e,o.mutation.getFieldMask(),W.now())):s.set(e.key,It.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new gr(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=Je();let r=new At(((t,e)=>t-e)),i=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||It.empty();o=i.applyToLocalView(s,o),n.set(t,o);const a=(r.get(i.batchId)||tn()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,u=r.value,c=Xe();u.forEach((t=>{if(!i.has(t)){const r=An(e.get(t),n.get(t));null!==r&&c.set(t,r),i=i.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return ct.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,r){return function(t){return tt.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):De(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):ct.resolve(Qe());let o=-1,a=i;return s.next((e=>ct.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?ct.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,tn()))).next((t=>({batchId:o,changes:We(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new tt(e)).next((t=>{let e=Ge();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const i=e.collectionGroup;let s=Ge();return this.indexManager.getCollectionParents(t,i).next((o=>ct.forEach(o,(o=>{const a=function(t,e){return new Ie(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return this.getDocumentsMatchingCollectionQuery(t,a,n,r).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i,r)))).next((t=>{i.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,ee.newInvalidDocument(r)))}));let n=Ge();return t.forEach(((t,r)=>{const s=i.get(t);void 0!==s&&Sn(s.mutation,r,It.empty(),W.now()),Fe(e,r)&&(n=n.insert(t,r))})),n}))}}class vr{constructor(t){this.serializer=t,this.lr=new Map,this.hr=new Map}getBundleMetadata(t,e){return ct.resolve(this.lr.get(e))}saveBundleMetadata(t,e){return this.lr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:zn(t.createTime)}}(e)),ct.resolve()}getNamedQuery(t,e){return ct.resolve(this.hr.get(e))}saveNamedQuery(t,e){return this.hr.set(e.name,function(t){return{name:t.name,query:ur(t.bundledQuery),readTime:zn(t.readTime)}}(e)),ct.resolve()}}class yr{constructor(){this.overlays=new At(tt.comparator),this.Pr=new Map}getOverlay(t,e){return ct.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Qe();return ct.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.ht(t,e,r)})),ct.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.Pr.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.Pr.delete(n)),ct.resolve()}getOverlaysForCollection(t,e,n){const r=Qe(),i=e.length+1,s=new tt(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return ct.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new At(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=Qe(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Qe(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return ct.resolve(o)}ht(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.Pr.get(r.largestBatchId).delete(n.key);this.Pr.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Un(e,n));let i=this.Pr.get(e);void 0===i&&(i=tn(),this.Pr.set(e,i)),this.Pr.set(e,i.add(n.key))}}class _r{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(t){return ct.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,ct.resolve()}}class br{constructor(){this.Ir=new Ot(wr.Tr),this.Er=new Ot(wr.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(t,e){const n=new wr(t,e);this.Ir=this.Ir.add(n),this.Er=this.Er.add(n)}Ar(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Rr(new wr(t,e))}Vr(t,e){t.forEach((t=>this.removeReference(t,e)))}mr(t){const e=new tt(new J([])),n=new wr(e,t),r=new wr(e,t+1),i=[];return this.Er.forEachInRange([n,r],(t=>{this.Rr(t),i.push(t.key)})),i}gr(){this.Ir.forEach((t=>this.Rr(t)))}Rr(t){this.Ir=this.Ir.delete(t),this.Er=this.Er.delete(t)}pr(t){const e=new tt(new J([])),n=new wr(e,t),r=new wr(e,t+1);let i=tn();return this.Er.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new wr(t,0),n=this.Ir.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class wr{constructor(t,e){this.key=t,this.yr=e}static Tr(t,e){return tt.comparator(t.key,e.key)||z(t.yr,e.yr)}static dr(t,e){return z(t.yr,e.yr)||tt.comparator(t.key,e.key)}}class Er{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.wr=1,this.Sr=new Ot(wr.Tr)}checkEmpty(t){return ct.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ln(i,e,n,r);this.mutationQueue.push(s);for(const o of r)this.Sr=this.Sr.add(new wr(o.key,i)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return ct.resolve(s)}lookupMutationBatch(t,e){return ct.resolve(this.br(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.Dr(n),i=r<0?0:r;return ct.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ct.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(t){return ct.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new wr(e,0),r=new wr(e,Number.POSITIVE_INFINITY),i=[];return this.Sr.forEachInRange([n,r],(t=>{const e=this.br(t.yr);i.push(e)})),ct.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ot(z);return e.forEach((t=>{const e=new wr(t,0),r=new wr(t,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([e,r],(t=>{n=n.add(t.yr)}))})),ct.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;tt.isDocumentKey(i)||(i=i.child(""));const s=new wr(new tt(i),0);let o=new Ot(z);return this.Sr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.yr)),!0)}),s),ct.resolve(this.Cr(o))}Cr(t){const e=[];return t.forEach((t=>{const n=this.br(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){N(0===this.vr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Sr;return ct.forEach(e.mutations,(r=>{const i=new wr(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Sr=n}))}xn(t){}containsKey(t,e){const n=new wr(e,0),r=this.Sr.firstAfterOrEqual(n);return ct.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,ct.resolve()}vr(t,e){return this.Dr(t)}Dr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}br(t){const e=this.Dr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Ar{constructor(t){this.Fr=t,this.docs=new At(tt.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.Fr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return ct.resolve(n?n.document.mutableCopy():ee.newInvalidDocument(e))}getEntries(t,e){let n=He();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():ee.newInvalidDocument(t))})),ct.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=He();const s=e.path,o=new tt(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||st(rt(o),n)<=0||(r.has(o.key)||Fe(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ct.resolve(i)}getAllFromCollectionGroup(t,e,n,r){k()}Mr(t,e){return ct.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Tr(this)}getSize(t){return ct.resolve(this.size)}}class Tr extends pr{constructor(t){super(),this.ur=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.ur.addEntry(t,r)):this.ur.removeEntry(n)})),ct.waitFor(e)}getFromCache(t,e){return this.ur.getEntry(t,e)}getAllFromCache(t,e){return this.ur.getEntries(t,e)}}class Sr{constructor(t){this.persistence=t,this.Or=new qe((t=>Oe(t)),Ce),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new br,this.targetCount=0,this.Br=dr.Ln()}forEachTarget(t,e){return this.Or.forEach(((t,n)=>e(n))),ct.resolve()}getLastRemoteSnapshotVersion(t){return ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ct.resolve(this.Nr)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),ct.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Nr&&(this.Nr=e),ct.resolve()}Qn(t){this.Or.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new dr(e),this.highestTargetId=e),t.sequenceNumber>this.Nr&&(this.Nr=t.sequenceNumber)}addTargetData(t,e){return this.Qn(e),this.targetCount+=1,ct.resolve()}updateTargetData(t,e){return this.Qn(e),ct.resolve()}removeTargetData(t,e){return this.Or.delete(e.target),this.Lr.mr(e.targetId),this.targetCount-=1,ct.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Or.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Or.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),ct.waitFor(i).next((()=>r))}getTargetCount(t){return ct.resolve(this.targetCount)}getTargetData(t,e){const n=this.Or.get(e)||null;return ct.resolve(n)}addMatchingKeys(t,e,n){return this.Lr.Ar(e,n),ct.resolve()}removeMatchingKeys(t,e,n){this.Lr.Vr(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),ct.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Lr.mr(e),ct.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Lr.pr(e);return ct.resolve(n)}containsKey(t,e){return ct.resolve(this.Lr.containsKey(e))}}class Or{constructor(t,e){this.kr={},this.overlays={},this.qr=new ft(0),this.Qr=!1,this.Qr=!0,this.Kr=new _r,this.referenceDelegate=t(this),this.$r=new Sr(this),this.indexManager=new lr,this.remoteDocumentCache=function(t){return new Ar(t)}((t=>this.referenceDelegate.Ur(t))),this.serializer=new ar(e),this.Wr=new vr(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new yr,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.kr[t.toKey()];return n||(n=new Er(e,this.referenceDelegate),this.kr[t.toKey()]=n),n}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(t,e,n){O("MemoryPersistence","Starting transaction:",t);const r=new Cr(this.qr.next());return this.referenceDelegate.Gr(),n(r).next((t=>this.referenceDelegate.zr(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}jr(t,e){return ct.or(Object.values(this.kr).map((n=>()=>n.containsKey(t,e))))}}class Cr extends at{constructor(t){super(),this.currentSequenceNumber=t}}class Ir{constructor(t){this.persistence=t,this.Hr=new br,this.Jr=null}static Yr(t){return new Ir(t)}get Zr(){if(this.Jr)return this.Jr;throw k()}addReference(t,e,n){return this.Hr.addReference(n,e),this.Zr.delete(n.toString()),ct.resolve()}removeReference(t,e,n){return this.Hr.removeReference(n,e),this.Zr.add(n.toString()),ct.resolve()}markPotentiallyOrphaned(t,e){return this.Zr.add(e.toString()),ct.resolve()}removeTarget(t,e){this.Hr.mr(e.targetId).forEach((t=>this.Zr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Zr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Gr(){this.Jr=new Set}zr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ct.forEach(this.Zr,(n=>{const r=tt.fromPath(n);return this.Xr(t,r).next((t=>{t||e.removeEntry(r,Q.min())}))})).next((()=>(this.Jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Xr(t,e).next((t=>{t?this.Zr.delete(e.toString()):this.Zr.add(e.toString())}))}Ur(t){return 0}Xr(t,e){return ct.or([()=>ct.resolve(this.Hr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.jr(t,e)])}}class Rr{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Ki=n,this.$i=r}static Ui(t,e){let n=tn(),r=tn();for(const i of e.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Rr(t,e.fromCache,n,r)}}class kr{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Nr{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=(0,a.nr)()?8:lt((0,a.ZQ)())>0?6:4}initialize(t,e){this.Hi=t,this.indexManager=e,this.Wi=!0}getDocumentsMatchingQuery(t,e,n,r){const i={result:null};return this.Ji(t,e).next((t=>{i.result=t})).next((()=>{if(!i.result)return this.Yi(t,e,r,n).next((t=>{i.result=t}))})).next((()=>{if(i.result)return;const n=new kr;return this.Zi(t,e,n).next((r=>{if(i.result=r,this.Gi)return this.Xi(t,e,n,r.size)}))})).next((()=>i.result))}Xi(t,e,n,r){return n.documentReadCount<this.zi?(S()<=o.$b.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",je(e),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),ct.resolve()):(S()<=o.$b.DEBUG&&O("QueryEngine","Query:",je(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ji*r?(S()<=o.$b.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",je(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Pe(e))):ct.resolve())}Ji(t,e){if(Ne(e))return ct.resolve(null);let n=Pe(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=Me(e,null,"F"),n=Pe(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=tn(...r);return this.Hi.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.es(e,r);return this.ts(e,s,i,n.readTime)?this.Ji(t,Me(e,null,"F")):this.ns(t,s,e,n)}))))})))))}Yi(t,e,n,r){return Ne(e)||r.isEqual(Q.min())?ct.resolve(null):this.Hi.getDocuments(t,n).next((i=>{const s=this.es(e,i);return this.ts(e,s,n,r)?ct.resolve(null):(S()<=o.$b.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),je(e)),this.ns(t,s,e,nt(r,-1)).next((t=>t)))}))}es(t,e){let n=new Ot(Be(t));return e.forEach(((e,r)=>{Fe(t,r)&&(n=n.add(r))})),n}ts(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Zi(t,e,n){return S()<=o.$b.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",je(e)),this.Hi.getDocumentsMatchingQuery(t,e,it.min(),n)}ns(t,e,n,r){return this.Hi.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Dr{constructor(t,e,n,r){this.persistence=t,this.rs=e,this.serializer=r,this.ss=new At(z),this.os=new qe((t=>Oe(t)),Ce),this._s=new Map,this.us=t.getRemoteDocumentCache(),this.$r=t.getTargetCache(),this.Wr=t.getBundleCache(),this.cs(n)}cs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new mr(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ss)))}}function xr(t,e,n,r){return new Dr(t,e,n,r)}async function Pr(t,e){const n=D(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n.cs(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],s=[];let o=tn();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({ls:t,removedBatchIds:i,addedBatchIds:s})))}))}))}function Lr(t){const e=D(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.$r.getLastRemoteSnapshotVersion(t)))}function Mr(t,e){const n=D(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}class Ur{constructor(){this.activeTargetIds=nn()}Vs(t){this.activeTargetIds=this.activeTargetIds.add(t)}fs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Rs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Vr{constructor(){this.io=new Ur,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.io.Vs(t),this.so[t]||"not-current"}updateQueryState(t,e,n){this.so[t]=e}removeLocalQueryTarget(t){this.io.fs(t)}isLocalQueryTarget(t){return this.io.activeTargetIds.has(t)}clearQueryState(t){delete this.so[t]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(t){return this.io.activeTargetIds.has(t)}start(){return this.io=new Ur,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class jr{oo(t){}shutdown(){}}class Fr{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(t){this.lo.push(t)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.lo)t(0)}co(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.lo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Br=null;function $r(){return null===Br?Br=268435456+Math.round(2147483648*Math.random()):Br++,"0x"+Br.toString(16)}const qr={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kr{constructor(t){this.Po=t.Po,this.Io=t.Io}To(t){this.Eo=t}Ao(t){this.Ro=t}Vo(t){this.mo=t}onMessage(t){this.fo=t}close(){this.Io()}send(t){this.Po(t)}po(){this.Eo()}yo(){this.Ro()}wo(t){this.mo(t)}So(t){this.fo(t)}}const Hr="WebChannelConnection";class zr extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.bo=e+"://"+t.host,this.Do=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get vo(){return!1}Fo(t,e,n,r,i){const s=$r(),o=this.Mo(t,e.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(a,r,i),this.Oo(t,o,a,n).then((e=>(O("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw I("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}No(t,e,n,r,i,s){return this.Fo(t,e,n,r,i)}xo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+A,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}Mo(t,e){const n=qr[t];return`${this.bo}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Oo(t,e,n,r){const i=$r();return new Promise(((s,o)=>{const a=new l;a.setWithCredentials(!0),a.listenOnce(d.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case p.NO_ERROR:const e=a.getResponseJson();O(Hr,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(e)),s(e);break;case p.TIMEOUT:O(Hr,`RPC '${t}' ${i} timed out`),o(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case p.HTTP_ERROR:const n=a.getStatus();if(O(Hr,`RPC '${t}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(e)>=0?e:x.UNKNOWN}(e.status);o(new P(t,e.message))}else o(new P(x.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new P(x.UNAVAILABLE,"Connection failed."));break;default:k()}}finally{O(Hr,`RPC '${t}' ${i} completed.`)}}));const u=JSON.stringify(r);O(Hr,`RPC '${t}' ${i} sending request:`,r),a.send(e,"POST",u,n,15)}))}Lo(t,e,n){const r=$r(),i=[this.bo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=y(),o=v(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(a.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(a.xmlHttpFactory=new h({})),this.xo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=i.join("");O(Hr,`Creating RPC '${t}' stream ${r}: ${c}`,a);const l=s.createWebChannel(c,a);let d=!1,p=!1;const _=new Kr({Po:e=>{p?O(Hr,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(d||(O(Hr,`Opening RPC '${t}' stream ${r} transport.`),l.open(),d=!0),O(Hr,`RPC '${t}' stream ${r} sending:`,e),l.send(e))},Io:()=>l.close()}),b=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return b(l,f.EventType.OPEN,(()=>{p||(O(Hr,`RPC '${t}' stream ${r} transport opened.`),_.po())})),b(l,f.EventType.CLOSE,(()=>{p||(p=!0,O(Hr,`RPC '${t}' stream ${r} transport closed`),_.wo())})),b(l,f.EventType.ERROR,(e=>{p||(p=!0,I(Hr,`RPC '${t}' stream ${r} transport errored:`,e),_.wo(new P(x.UNAVAILABLE,"The operation could not be completed")))})),b(l,f.EventType.MESSAGE,(e=>{var n;if(!p){const i=e.data[0];N(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){O(Hr,`RPC '${t}' stream ${r} received error:`,o);const e=o.status;let n=function(t){const e=Vn[t];if(void 0!==e)return Bn(e)}(e),i=o.message;void 0===n&&(n=x.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),p=!0,_.wo(new P(n,i)),l.close()}else O(Hr,`RPC '${t}' stream ${r} received:`,i),_.So(i)}})),b(o,m.STAT_EVENT,(e=>{e.stat===g.PROXY?O(Hr,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===g.NOPROXY&&O(Hr,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{_.yo()}),0),_}}function Gr(){return"undefined"!=typeof document?document:null}function Wr(t){return new $n(t,!0)}class Qr{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ai=t,this.timerId=e,this.Bo=n,this.ko=r,this.qo=i,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(t){this.cancel();const e=Math.floor(this.Qo+this.Go()),n=Math.max(0,Date.now()-this.$o),r=Math.max(0,e-n);r>0&&O("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Qo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,r,(()=>(this.$o=Date.now(),t()))),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){null!==this.Ko&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){null!==this.Ko&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}}class Xr{constructor(t,e,n,r,i,s,o,a){this.ai=t,this.jo=n,this.Ho=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new Qr(t,e)}t_(){return 1===this.state||5===this.state||this.n_()}n_(){return 2===this.state||3===this.state}start(){this.Xo=0,4!==this.state?this.auth():this.r_()}async stop(){this.t_()&&await this.close(0)}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&null===this.Yo&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,(()=>this.o_())))}__(t){this.a_(),this.stream.send(t)}async o_(){if(this.n_())return this.close(0)}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}async close(t,e){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,4!==t?this.e_.reset():e&&e.code===x.RESOURCE_EXHAUSTED?(C(e.toString()),C("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):e&&e.code===x.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.c_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Vo(e)}c_(){}auth(){this.state=1;const t=this.l_(this.Jo),e=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((t=>{let[n,r]=t;this.Jo===e&&this.h_(n,r)}),(e=>{t((()=>{const t=new P(x.UNKNOWN,"Fetching auth token failed: "+e.message);return this.P_(t)}))}))}h_(t,e){const n=this.l_(this.Jo);this.stream=this.I_(t,e),this.stream.To((()=>{n((()=>this.listener.To()))})),this.stream.Ao((()=>{n((()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,(()=>(this.n_()&&(this.state=3),Promise.resolve()))),this.listener.Ao())))})),this.stream.Vo((t=>{n((()=>this.P_(t)))})),this.stream.onMessage((t=>{n((()=>1==++this.Xo?this.T_(t):this.onNext(t)))}))}r_(){this.state=5,this.e_.Wo((async()=>{this.state=0,this.start()}))}P_(t){return O("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}l_(t){return e=>{this.ai.enqueueAndForget((()=>this.Jo===t?e():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Jr extends Xr{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(t,e){return this.connection.Lo("Write",t,e)}T_(t){return N(!!t.streamToken),this.lastStreamToken=t.streamToken,N(!t.writeResults||0===t.writeResults.length),this.listener.m_()}onNext(t){N(!!t.streamToken),this.lastStreamToken=t.streamToken,this.e_.reset();const e=function(t,e){return t&&t.length>0?(N(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?zn(t.updateTime):zn(e);return n.isEqual(Q.min())&&(n=zn(e)),new _n(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=zn(t.commitTime);return this.listener.f_(n,e)}g_(){const t={};t.database=Yn(this.serializer),this.__(t)}V_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>er(this.serializer,t)))};this.__(e)}}class Yr extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.p_=!1}y_(){if(this.p_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(t,e,n,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Fo(t,Wn(e,n),r,s,o)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new P(x.UNKNOWN,t.toString())}))}No(t,e,n,r,i){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.No(t,Wn(e,n),r,o,a,i)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new P(x.UNKNOWN,t.toString())}))}terminate(){this.p_=!0,this.connection.terminate()}}class Zr{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){0===this.w_&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}F_(t){"Online"===this.state?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.M_(),this.w_=0,"Online"===t&&(this.b_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}v_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(C(e),this.b_=!1):O("OnlineStateTracker",e)}M_(){null!==this.S_&&(this.S_.cancel(),this.S_=null)}}class ti{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=i,this.B_.oo((t=>{n.enqueueAndForget((async()=>{ri(this)&&(O("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=D(t);e.N_.add(4),await ni(e),e.k_.set("Unknown"),e.N_.delete(4),await ei(e)}(this))}))})),this.k_=new Zr(n,r)}}async function ei(t){if(ri(t))for(const e of t.L_)await e(!0)}async function ni(t){for(const e of t.L_)await e(!1)}function ri(t){return 0===D(t).N_.size}async function ii(t,e,n){if(!ht(e))throw e;t.N_.add(1),await ni(t),t.k_.set("Offline"),n||(n=()=>Lr(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{O("RemoteStore","Retrying IndexedDB access"),await n(),t.N_.delete(1),await ei(t)}))}function si(t,e){return e().catch((n=>ii(t,n,e)))}async function oi(t){const e=D(t),n=vi(e);let r=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;ai(e);)try{const t=await Mr(e.localStore,r);if(null===t){0===e.x_.length&&n.s_();break}r=t.batchId,ui(e,t)}catch(t){await ii(e,t)}ci(e)&&li(e)}function ai(t){return ri(t)&&t.x_.length<10}function ui(t,e){t.x_.push(e);const n=vi(t);n.n_()&&n.R_&&n.V_(e.mutations)}function ci(t){return ri(t)&&!vi(t).t_()&&t.x_.length>0}function li(t){vi(t).start()}async function hi(t){vi(t).g_()}async function fi(t){const e=vi(t);for(const n of t.x_)e.V_(n.mutations)}async function di(t,e,n){const r=t.x_.shift(),i=Mn.from(r,e,n);await si(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await oi(t)}async function pi(t,e){e&&vi(t).R_&&await async function(t,e){if(function(t){return Fn(t)&&t!==x.ABORTED}(e.code)){const n=t.x_.shift();vi(t).i_(),await si(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await oi(t)}}(t,e),ci(t)&&li(t)}async function gi(t,e){const n=D(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");const r=ri(n);n.N_.add(3),await ni(n),r&&n.k_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.N_.delete(3),await ei(n)}async function mi(t,e){const n=D(t);e?(n.N_.delete(2),await ei(n)):e||(n.N_.add(2),await ni(n),n.k_.set("Unknown"))}function vi(t){return t.K_||(t.K_=function(t,e,n){const r=D(t);return r.y_(),new Jr(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{To:()=>Promise.resolve(),Ao:hi.bind(null,t),Vo:pi.bind(null,t),m_:fi.bind(null,t),f_:di.bind(null,t)}),t.L_.push((async e=>{e?(t.K_.i_(),await oi(t)):(await t.K_.stop(),t.x_.length>0&&(O("RemoteStore",`Stopping write stream with ${t.x_.length} pending writes`),t.x_=[]))}))),t.K_}class yi{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new L,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new yi(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _i(t,e){if(C("AsyncQueue",`${e}: ${t}`),ht(t))return new P(x.UNAVAILABLE,`${e}: ${t}`);throw t}class bi{constructor(){this.queries=wi(),this.onlineState="Unknown",this.J_=new Set}terminate(){!function(t,e){const n=D(t),r=n.queries;n.queries=wi(),r.forEach(((t,n)=>{for(const r of n.z_)r.onError(e)}))}(this,new P(x.ABORTED,"Firestore shutting down"))}}function wi(){return new qe((t=>Ve(t)),Ue)}function Ei(t){t.J_.forEach((t=>{t.next()}))}var Ai,Ti;(Ti=Ai||(Ai={})).X_="default",Ti.Cache="cache";class Si{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.va=new qe((t=>Ve(t)),Ue),this.Fa=new Map,this.Ma=new Set,this.xa=new At(tt.comparator),this.Oa=new Map,this.Na=new br,this.La={},this.Ba=new Map,this.ka=dr.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return!0===this.qa}}function Oi(t,e,n){const r=D(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.va.forEach(((n,r)=>{const i=r.view.Y_(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=D(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const i of n.z_)i.Y_(e)&&(r=!0)})),r&&Ei(n)}(r.eventManager,e),t.length&&r.Ca.E_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ci(t,e){const n=D(t),r=e.batch.batchId;try{const t=await function(t,e){const n=D(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.us.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=ct.resolve();return s.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);N(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=tn();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(n.localStore,e);ki(n,r,null),Ri(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ni(n,t)}catch(t){await ut(t)}}async function Ii(t,e,n){const r=D(t);try{const t=await function(t,e){const n=D(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(N(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);ki(r,e,n),Ri(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ni(r,t)}catch(n){await ut(n)}}function Ri(t,e){(t.Ba.get(e)||[]).forEach((t=>{t.resolve()})),t.Ba.delete(e)}function ki(t,e,n){const r=D(t);let i=r.La[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.La[r.currentUser.toKey()]=i}}async function Ni(t,e,n){const r=D(t),i=[],s=[],o=[];r.va.isEmpty()||(r.va.forEach(((t,a)=>{o.push(r.Qa(a,e,n).then((t=>{var e;if((t||n)&&r.isPrimaryClient){const i=t?!t.fromCache:null===(e=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===e?void 0:e.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(t){i.push(t);const e=Rr.Ui(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.Ca.E_(i),await async function(t,e){const n=D(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>ct.forEach(e,(e=>ct.forEach(e.Ki,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>ct.forEach(e.$i,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!ht(t))throw t;O("LocalStore","Failed to update sequence numbers: "+t)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.ss.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.ss=n.ss.insert(t,i)}}}(r.localStore,s))}async function Di(t,e){const n=D(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());const t=await Pr(n.localStore,e);n.currentUser=e,function(t,e){t.Ba.forEach((t=>{t.forEach((t=>{t.reject(new P(x.CANCELLED,e))}))})),t.Ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Ni(n,t.ls)}}function xi(t){const e=D(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ci.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ii.bind(null,e),e}class Pi{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Wr(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return xr(this.persistence,new Nr,t.initialUser,this.serializer)}createPersistence(t){return new Or(Ir.Yr,this.serializer)}createSharedClientState(t){return new Vr}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Li{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Oi(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Di.bind(null,this.syncEngine),await mi(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new bi}createDatastore(t){const e=Wr(t.databaseInfo.databaseId),n=function(t){return new zr(t)}(t.databaseInfo);return function(t,e,n,r){return new Yr(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,r,i){return new ti(t,e,n,r,i)}(this.localStore,this.datastore,t.asyncQueue,(t=>Oi(this.syncEngine,t,0)),Fr.D()?new Fr:new jr)}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new Si(t,e,n,r,i,s);return o&&(a.qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=D(t);O("RemoteStore","RemoteStore shutting down."),e.N_.add(5),await ni(e),e.B_.shutdown(),e.k_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}class Mi{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=E.UNAUTHENTICATED,this.clientId=H.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{O("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(O("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new L;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=_i(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Ui(t,e){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await Pr(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Vi(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Fi(t);O("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>gi(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>gi(e.remoteStore,n))),t._onlineComponents=e}function ji(t){return"FirebaseError"===t.name?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}async function Fi(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ui(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!ji(n))throw n;I("Error using user provided cache. Falling back to memory cache: "+n),await Ui(t,new Pi)}}else O("FirestoreClient","Using default OfflineComponentProvider"),await Ui(t,new Pi);return t._offlineComponents}async function Bi(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),await Vi(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),await Vi(t,new Li))),t._onlineComponents}function $i(t){return Bi(t).then((t=>t.syncEngine))}function qi(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Ki=new Map;function Hi(t,e,n){if(!n)throw new P(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zi(t){if(!tt.isDocumentKey(t))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gi(t){if(tt.isDocumentKey(t))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wi(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":k()}function Qi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wi(t);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Xi{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,r){if(!0===e&&!0===r)throw new P(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qi(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ji{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xi({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xi(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new U;switch(t.type){case"firstParty":return new B(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Ki.get(t);e&&(O("ComponentProvider","Removing Datastore"),Ki.delete(t),e.terminate())}(this),Promise.resolve()}}class Yi{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Yi(this.firestore,t,this._query)}}class Zi{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Zi(this.firestore,t,this._key)}}class ts extends Yi{constructor(t,e,n){super(t,e,ke(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Zi(this.firestore,null,new tt(t))}withConverter(t){return new ts(this.firestore,t,this._path)}}function es(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t=(0,a.Ku)(t),Hi("collection","path",e),t instanceof Ji){const n=J.fromString(e,...r);return Gi(n),new ts(t,null,n)}{if(!(t instanceof Zi||t instanceof ts))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(J.fromString(e,...r));return Gi(n),new ts(t.firestore,null,n)}}class ns{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new Qr(this,"async_queue_retry"),this.Tu=()=>{const t=Gr();t&&O("AsyncQueue","Visibility state changed to "+t.visibilityState),this.e_.zo()};const t=Gr();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Eu(),this.du(t)}enterRestrictedMode(t){if(!this.uu){this.uu=!0,this.Pu=t||!1;const e=Gr();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Tu)}}enqueue(t){if(this.Eu(),this.uu)return new Promise((()=>{}));const e=new L;return this.du((()=>this.uu&&this.Pu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.au.push(t),this.Au())))}async Au(){if(0!==this.au.length){try{await this.au[0](),this.au.shift(),this.e_.reset()}catch(t){if(!ht(t))throw t;O("AsyncQueue","Operation failed with retryable error: "+t)}this.au.length>0&&this.e_.Wo((()=>this.Au()))}}du(t){const e=this._u.then((()=>(this.hu=!0,t().catch((t=>{this.lu=t,this.hu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw C("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.hu=!1,t))))));return this._u=e,e}enqueueAfterDelay(t,e,n){this.Eu(),this.Iu.indexOf(t)>-1&&(e=0);const r=yi.createAndSchedule(this,t,e,n,(t=>this.Ru(t)));return this.cu.push(r),r}Eu(){this.lu&&k()}verifyOperationInProgress(){}async Vu(){let t;do{t=this._u,await t}while(t!==this._u)}mu(t){for(const e of this.cu)if(e.timerId===t)return!0;return!1}fu(t){return this.Vu().then((()=>{this.cu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.cu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Vu()}))}gu(t){this.Iu.push(t)}Ru(t){const e=this.cu.indexOf(t);this.cu.splice(e,1)}}class rs extends Ji{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new ns,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||os(this),this._firestoreClient.terminate()}}function is(t,e){const n="object"==typeof t?t:(0,i.Sx)(),r="string"==typeof t?t:e||"(default)",s=(0,i.j6)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const t=(0,a.yU)("firestore");t&&function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(t=Qi(t,Ji))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&I("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=E.MOCK_USER;else{e=(0,a.Fy)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new E(s)}t._authCredentials=new V(new M(e,n))}}(s,...t)}return s}function ss(t){return t._firestoreClient||os(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function os(t){var e,n,r;const i=t._freezeSettings(),s=function(t,e,n,r){return new Vt(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,qi(r.experimentalLongPollingOptions),r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Mi(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class as{constructor(t){this._byteString=t}static fromBase64String(t){try{return new as(kt.fromBase64String(t))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new as(kt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class us{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let r=0;r<e.length;++r)if(0===e[r].length)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Z(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class cs{constructor(t){this._methodName=t}}class ls{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return z(this._lat,t._lat)||z(this._long,t._long)}}const hs=/^__.*__$/;class fs{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Rn(t,this.data,this.fieldMask,e,this.fieldTransforms):new In(t,this.data,e,this.fieldTransforms)}}function ds(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw k()}}class ps{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(t){return new ps(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wu({path:n,bu:!1});return r.Du(t),r}Cu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wu({path:n,bu:!1});return r.pu(),r}vu(t){return this.wu({path:void 0,bu:!0})}Fu(t){return Ss(t,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Du(this.path.get(t))}Du(t){if(0===t.length)throw this.Fu("Document fields must not be empty");if(ds(this.yu)&&hs.test(t))throw this.Fu('Document fields cannot begin and end with "__"')}}class gs{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Wr(t)}Ou(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ps({yu:t,methodName:e,xu:n,path:Z.emptyPath(),bu:!1,Mu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ms(t){const e=t._freezeSettings(),n=Wr(t._databaseId);return new gs(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vs(t,e,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=t.Ou(s.merge||s.mergeFields?2:0,e,n,i);ws("Data must be an object, but it was:",o,r);const a=_s(r,o);let u,c;if(s.merge)u=new It(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=Es(e,r,n);if(!o.contains(i))throw new P(x.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Os(t,i)||t.push(i)}u=new It(t),c=o.fieldTransforms.filter((t=>u.covers(t.field)))}else u=null,c=o.fieldTransforms;return new fs(new Zt(a),u,c)}function ys(t,e){if(bs(t=(0,a.Ku)(t)))return ws("Unsupported field value:",e,t),_s(t,e);if(t instanceof cs)return function(t,e){if(!ds(e.yu))throw e.Fu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Fu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.bu&&4!==e.yu)throw e.Fu("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=ys(i,e.vu(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,a.Ku)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return on(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=W.fromDate(t);return{timestampValue:qn(e.serializer,n)}}if(t instanceof W){const n=new W(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qn(e.serializer,n)}}if(t instanceof ls)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof as)return{bytesValue:Kn(e.serializer,t._byteString)};if(t instanceof Zi){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Fu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Gn(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Fu(`Unsupported field value: ${Wi(t)}`)}(t,e)}function _s(t,e){const n={};return Et(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wt(t,((t,r)=>{const i=ys(r,e.Su(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function bs(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof W||t instanceof ls||t instanceof as||t instanceof Zi||t instanceof cs)}function ws(t,e,n){if(!bs(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=Wi(n);throw"an object"===r?e.Fu(t+" a custom object"):e.Fu(t+" "+r)}}function Es(t,e,n){if((e=(0,a.Ku)(e))instanceof us)return e._internalPath;if("string"==typeof e)return Ts(t,e);throw Ss("Field path arguments must be of type string or ",t,!1,void 0,n)}const As=new RegExp("[~\\*/\\[\\]]");function Ts(t,e,n){if(e.search(As)>=0)throw Ss(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new us(...e.split("."))._internalPath}catch(r){throw Ss(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ss(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new P(x.INVALID_ARGUMENT,a+t+u)}function Os(t,e){return t.some((t=>t.isEqual(e)))}function Cs(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function Is(t,e){const n=Qi(t.firestore,rs),r=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t=(0,a.Ku)(t),1===arguments.length&&(e=H.newId()),Hi("doc","path",e),t instanceof Ji){const n=J.fromString(e,...r);return zi(n),new Zi(t,null,new tt(n))}{if(!(t instanceof Zi||t instanceof ts))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(J.fromString(e,...r));return zi(n),new Zi(t.firestore,t instanceof ts?t.converter:null,new tt(n))}}(t),i=Cs(t.converter,e);return Rs(n,[vs(ms(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,bn.exists(!1))]).then((()=>r))}function Rs(t,e){return function(t,e){const n=new L;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=xi(t);try{const t=await function(t,e){const n=D(t),r=W.now(),i=e.reduce(((t,e)=>t.add(e.key)),tn());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=He(),u=tn();return n.us.getEntries(t,i).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(u=u.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((i=>{s=i;const o=[];for(const t of e){const e=On(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Rn(t.key,e,te(e.value.mapValue),bn.exists(!0)))}return n.mutationQueue.addMutationBatch(t,r,o,e)})).next((e=>{o=e;const r=e.applyToLocalDocumentSet(s,u);return n.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:We(s)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.La[t.currentUser.toKey()];r||(r=new At(z)),r=r.insert(e,n),t.La[t.currentUser.toKey()]=r}(r,t.batchId,n),await Ni(r,t.changes),await oi(r.remoteStore)}catch(t){const e=_i(t,"Failed to persist write");n.reject(e)}}(await $i(t),e,n))),n.promise}(ss(t),e)}new WeakMap;!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){A=t}(i.MF),(0,i.om)(new s.uA("firestore",((t,n)=>{let{instanceIdentifier:r,options:i}=n;const s=t.getProvider("app").getImmediate(),o=new rs(new j(t.getProvider("auth-internal")),new q(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jt(t.options.projectId,e)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),(0,i.KO)(w,"4.6.5",t),(0,i.KO)(w,"4.6.5","esm2017")}()},8147:(t,e,n)=>{n.d(e,{qk:()=>ut,c7:()=>lt,_w:()=>at,KR:()=>ct});var r=n(7150),i=n(7700),s=n(8812);const o="firebasestorage.googleapis.com",a="storageBucket";class u extends i.g{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(h(t),`Firebase Storage: ${e} (${h(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,u.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return h(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var c,l;function h(t){return"storage/"+t}function f(){return new u(c.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function d(){return new u(c.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function p(){return new u(c.CANCELED,"User canceled the upload/download.")}function g(t){return new u(c.INVALID_ARGUMENT,t)}function m(){return new u(c.APP_DELETED,"The Firebase app was deleted.")}function v(t){throw new u(c.INTERNAL_ERROR,"Internal error: "+t)}!function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(c||(c={}));class y{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=y.makeFromUrl(t,e)}catch(i){return new y(t,"")}if(""===n.path)return n;throw r=t,new u(c.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(t,e){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}const a=e.replace(/[.]/g,"\\."),l=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${e===o?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let o=0;o<l.length;o++){const e=l[o],r=e.regex.exec(t);if(r){const t=r[e.indices.bucket];let i=r[e.indices.path];i||(i=""),n=new y(t,i),e.postModify(n);break}}if(null==n)throw function(t){return new u(c.INVALID_URL,"Invalid URL '"+t+"'.")}(t);return n}}class _{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(){}}function b(t){return"string"===typeof t||t instanceof String}function w(t,e,n,r){if(r<e)throw g(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw g(`Invalid value for '${t}'. Expected ${n} or less.`)}function E(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function A(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1),n}function T(t,e){const n=t>=500&&t<600,r=-1!==[408,429].indexOf(t),i=-1!==e.indexOf(t);return n||r||i}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(l||(l={}));class S{constructor(t,e,n,r,i,s,o,a,u,c,l){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=l,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()}))}start_(){const t=(t,e)=>{if(e)return void t(!1,new O(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=t=>{const e=t.loaded,n=t.lengthComputable?t.total:-1;null!==this.progressCallback_&&this.progressCallback_(e,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const e=n.getErrorCode()===l.NO_ERROR,i=n.getStatus();if(!e||T(i,this.additionalRetryCodes_)&&this.retry){const e=n.getErrorCode()===l.ABORT;return void t(!1,new O(!1,null,e))}const s=-1!==this.successCodes_.indexOf(i);t(!0,new O(s,n))}))},e=(t,e)=>{const n=this.resolve_,r=this.reject_,i=e.connection;if(e.wasSuccessCode)try{const t=this.callback_(i,i.getResponse());void 0!==t?n(t):n()}catch(s){r(s)}else if(null!==i){const t=f();t.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,t)):r(t)}else if(e.canceled){r(this.appDelete_?m():p())}else{r(d())}};this.canceled_?e(0,new O(!1,null,!0)):this.backoffId_=function(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return 2===a}let c=!1;function l(){if(!c){c=!0;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.apply(null,n)}}function h(e){i=setTimeout((()=>{i=null,t(d,u())}),e)}function f(){s&&clearTimeout(s)}function d(t){if(c)return void f();for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(t)return f(),void l.call(null,t,...n);if(u()||o)return f(),void l.call(null,t,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function g(t){p||(p=!0,f(),c||(null!==i?(t||(a=2),clearTimeout(i),h(0)):t||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class O{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function C(t){let e;try{e=JSON.parse(t)}catch(r){return null}return"object"!==typeof(n=e)||Array.isArray(n)?null:e;var n}function I(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function R(t,e){return e}class k{constructor(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||R}}let N=null;function D(){if(N)return N;const t=[];t.push(new k("bucket")),t.push(new k("generation")),t.push(new k("metageneration")),t.push(new k("name","fullPath",!0));const e=new k("name");e.xform=function(t,e){return function(t){return!b(t)||t.length<2?t:I(t)}(e)},t.push(e);const n=new k("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new k("timeCreated")),t.push(new k("updated")),t.push(new k("md5Hash",null,!0)),t.push(new k("cacheControl",null,!0)),t.push(new k("contentDisposition",null,!0)),t.push(new k("contentEncoding",null,!0)),t.push(new k("contentLanguage",null,!0)),t.push(new k("contentType",null,!0)),t.push(new k("metadata","customMetadata",!0)),N=t,N}function x(t,e,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const t=n[s];r[t.local]=t.xform(r,e[t.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){const n=t.bucket,r=t.fullPath,i=new y(n,r);return e._makeStorageReference(i)}})}(r,t),r}function P(t,e,n){const r=C(e);if(null===r)return null;return x(t,r,n)}const L="prefixes",M="items";function U(t,e,n){const r=C(n);if(null===r)return null;return function(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[L])for(const i of n[L]){const n=i.replace(/\/$/,""),s=t._makeStorageReference(new y(e,n));r.prefixes.push(s)}if(n[M])for(const i of n[M]){const n=t._makeStorageReference(new y(e,i.name));r.items.push(n)}return r}(t,e,r)}class V{constructor(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function j(t){if(!t)throw f()}function F(t,e){return function(n,r){const i=P(t,r,e);return j(null!==i),function(t,e,n,r){const i=C(e);if(null===i)return null;if(!b(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((e=>{const i=t.bucket,s=t.fullPath;return E("/b/"+o(i)+"/o/"+o(s),n,r)+A({alt:"media",token:e})}))[0]}(i,r,t.host,t._protocol)}}function B(t){return function(e,n){let r;var i,s;return 401===e.getStatus()?r=e.getErrorText().includes("Firebase App Check token is invalid")?new u(c.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new u(c.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(s=t.bucket,r=new u(c.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new u(c.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=e.getStatus(),r.serverResponse=n.serverResponse,r}}function $(t){const e=B(t);return function(n,r){let i=e(n,r);var s;return 404===n.getStatus()&&(s=t.path,i=new u(c.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function q(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=E(e.bucketOnlyServerUrl(),t.host,t._protocol),a=t.maxOperationRetryTime,u=new V(o,"GET",function(t,e){return function(n,r){const i=U(t,e,r);return j(null!==i),i}}(t,e.bucket),a);return u.urlParams=s,u.errorHandler=B(e),u}let K=null;class H{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=l.NO_ERROR,this.sendPromise_=new Promise((t=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=l.ABORT,t()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=l.NETWORK_ERROR,t()})),this.xhr_.addEventListener("load",(()=>{t()}))}))}send(t,e,n,r){if(this.sent_)throw v("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw v("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw v("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw v("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw v("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class z extends H{initXhr(){this.xhr_.responseType="text"}}function G(){return K?K():new z}class W{constructor(t,e){this._service=t,this._location=e instanceof y?e:y.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new W(t,e)}get root(){const t=new y(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return I(this._location.path)}get storage(){return this._service}get parent(){const t=function(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;const e=new y(this._location.bucket,t);return new W(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw function(t){return new u(c.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)}}function Q(t){const e={prefixes:[],items:[]};return X(t,e).then((()=>e))}async function X(t,e,n){const r={pageToken:n},i=await J(t,r);e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&await X(t,e,i.nextPageToken)}function J(t,e){null!=e&&"number"===typeof e.maxResults&&w("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=q(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,G)}function Y(t){t._throwIfRoot("getDownloadURL");const e=function(t,e,n){const r=E(e.fullServerUrl(),t.host,t._protocol),i=t.maxOperationRetryTime,s=new V(r,"GET",F(t,n),i);return s.errorHandler=$(e),s}(t.storage,t._location,D());return t.storage.makeRequestWithTokens(e,G).then((t=>{if(null===t)throw new u(c.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t}))}function Z(t,e){const n=function(t,e){const n=e.split("/").filter((t=>t.length>0)).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new y(t._location.bucket,n);return new W(t.storage,r)}function tt(t,e){if(t instanceof rt){const n=t;if(null==n._bucket)throw new u(c.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+a+"' property when initializing the app?");const r=new W(n,n._bucket);return null!=e?tt(r,e):r}return void 0!==e?Z(t,e):t}function et(t,e){if(e&&/^[A-Za-z]+:\/\//.test(e)){if(t instanceof rt)return new W(t,e);throw g("To use ref(service, url), the first argument must be a Storage instance.")}return tt(t,e)}function nt(t,e){const n=null===e||void 0===e?void 0:e[a];return null==n?null:y.makeFromBucketSpec(n,t)}class rt{constructor(t,e,n,r,i){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=o,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?y.makeFromBucketSpec(r,this._host):nt(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,null!=this._url?this._bucket=y.makeFromBucketSpec(this._url,t):this._bucket=nt(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){w("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){w("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(null!==e)return e.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});if(t){return(await t.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((t=>t.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new W(this,t)}_makeRequest(t,e,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new _(m());{const s=function(t,e,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=A(t.urlParams),u=t.url+a,c=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(c,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(c,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(c,s),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(c,r),new S(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}(t,this._appId,n,r,e,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(t,e){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n,r).getPromise()}}const it="@firebase/storage",st="0.12.6",ot="storage";function at(t){return Q(t=(0,i.Ku)(t))}function ut(t){return Y(t=(0,i.Ku)(t))}function ct(t,e){return et(t=(0,i.Ku)(t),e)}function lt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),e=arguments.length>1?arguments[1]:void 0;t=(0,i.Ku)(t);const n=(0,r.j6)(t,ot).getImmediate({identifier:e}),s=(0,i.yU)("storage");return s&&function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken="string"===typeof s?s:(0,i.Fy)(s,t.app.options.projectId))}(t,e,n,r)}(n,...s),n}function ht(t,e){let{instanceIdentifier:n}=e;const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new rt(i,s,o,n,r.MF)}(0,r.om)(new s.uA(ot,ht,"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(it,st,""),(0,r.KO)(it,st,"esm2017")}}]);
//# sourceMappingURL=628.c73bfb1a.chunk.js.map